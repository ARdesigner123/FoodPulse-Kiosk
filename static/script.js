const translations = {
    en: {
        menuTitle: "Food Court Menu",
        chinese: "Chinese",
        malay: "Malay",
        korean: "Korean",
        western: "Western",
        japanese: "Japanese",
        desserts: "Desserts",
        drinks: "Drinks",
        fruits: "Fruits",
        scheduleBtn: "Academic Schedule",
        trackerBtn: "Food Tracker",
        langLabel: "Language",
        crowdLevelLegend: "Crowd Level Legend",
        low: "Low",
        medium: "Medium",
        high: "High",
        weekend: "Weekend",
        days: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
        pickFoodcourt: "Pick Your Foodcourt",
        salesAvailable: "Sales Available",
        timePeriod: "Time Period",
        time1: "8am-10am",
        time2: "10am-12pm",
        time3: "12pm-3pm",
        time4: "3pm-5pm",
        time5: "5pm-7pm",
        chineseMenuTitle: "Chinese Food Menu",
        gpsTitle: "GPS Map of Singapore Polytechnic",
        gpsHint: "Tap a Food Court button to view its location",
        foodCourts: {
            fc1: "Food Court 1",
            fc2: "Food Court 2",
            fc3: "Food Court 3",
            fc4: "Food Court 4",
            fc6: "Food Court 6"
        },
        stalls: {
            "fc1-ban-mian-fish-soup": "Ban Mian / Fish Soup (FC1)",
            "fc1-economy-rice": "Economy Rice / Cai Png (FC1)",
            "fc2-economy-rice": "Economy Rice / Cai Png (FC2)",
            "fc3-chinese-cuisine": "Chinese Cuisine Stall (FC3)",
            "fc3-sp-mini-wok": "SP Mini Wok (FC3)",
            "fc4-taiwanese-chinese": "Taiwanese / Chinese-style Stall (FC4)",
            "fc4-happiness-sunbo": "Happiness Sunbo Chicken Rice (FC4)",
            "fc6-noodle-chinese": "Chinese-style Noodle Options (FC6)"
        }
    },
    zh: {
        menuTitle: "ч╛ОщгЯх╣┐хЬ║шПЬхНХ",
        chinese: "ф╕нщдР",
        malay: "щймцЭещдР",
        western: "ше┐щдР",
        korean: "щЯйщдР",
        japanese: "цЧещдР",
        desserts: "чФЬчВ╣",
        drinks: "щеоцЦЩ",
        fruits: "ц░┤цЮЬ",
        scheduleBtn: "хнжцЬпцЧечиЛ",
        trackerBtn: "щгЯчЙйш┐╜ш╕кхЩи",
        langLabel: "шпншиА",
        crowdLevelLegend: "ф║║ч╛дц░┤х╣│хЫ╛ф╛Л",
        low: "ф╜О",
        medium: "ф╕н",
        high: "щлШ",
        weekend: "хСицЬл",
        days: ["цЧе", "ф╕А", "ф║М", "ф╕Й", "хЫЫ", "ф║Ф", "хЕн"],
        pickFoodcourt: "щАЙцЛйцВичЪДщгЯщШБ",
        salesAvailable: "хПпчФищФАхФо",
        timePeriod: "цЧ╢щЧ┤цо╡",
        time1: "ф╕КхНИ8чВ╣-10чВ╣",
        time2: "ф╕КхНИ10чВ╣-12чВ╣",
        time3: "ф╕нхНИ12чВ╣-3чВ╣",
        time4: "ф╕ЛхНИ3чВ╣-5чВ╣",
        time5: "ф╕ЛхНИ5чВ╣-7чВ╣",
        chineseMenuTitle: "ф╕нх╝Пч╛ОщгЯшПЬхНХ",
        gpsTitle: "цЦ░хКахЭбчРЖх╖ехнжщЩв GPS хЬ░хЫ╛",
        gpsHint: "чВ╣хЗ╗щгЯщШБцМЙщТоцЯечЬЛф╜Нч╜о",
        foodCourts: {
            fc1: "щгЯщШБ 1",
            fc2: "щгЯщШБ 2",
            fc3: "щгЯщШБ 3",
            fc4: "щгЯщШБ 4",
            fc6: "щгЯщШБ 6"
        },
        stalls: {
            "fc1-ban-mian-fish-soup": "цЭ┐щЭв / щ▒╝ц▒дцСКф╜Н (щгЯщШБ1)",
            "fc1-economy-rice": "ч╗Пц╡Ощен / шПЬщен (щгЯщШБ1)",
            "fc2-economy-rice": "ч╗Пц╡Ощен / шПЬщен (щгЯщШБ2)",
            "fc3-chinese-cuisine": "ф╕нх╝Пч╛ОщгЯцСКф╜Н (щгЯщШБ3)",
            "fc3-sp-mini-wok": "SP х░ПчВТ (щгЯщШБ3)",
            "fc4-taiwanese-chinese": "хП░ц╣╛ / ф╕нх╝ПцСКф╜Н (щгЯщШБ4)",
            "fc4-happiness-sunbo": "х╣╕чжПщб║хоЭщ╕бщен (щгЯщШБ4)",
            "fc6-noodle-chinese": "ф╕нх╝ПщЭвцЭбщАЙщб╣ (щгЯщШБ6)"
        }
    },
    ta: {
        menuTitle: "роЙрогро╡рпБ роиро┐ро▓рпИроп роорпЖройрпБ",
        chinese: "роЪрпАрой роЙрогро╡рпБ",
        malay: "рооро▓ро╛ропрпН роЙрогро╡рпБ",
        western: "роорпЗро▒рпНроХродрпНродро┐роп роЙрогро╡рпБ",
        korean: "роХрпКро░ро┐ропройрпН роЙрогро╡рпБ",
        japanese: "роЬрокрпНрокро╛ройро┐роп роЙрогро╡рпБ",
        desserts: "роЗройро┐рокрпНрокрпБроХро│рпН",
        drinks: "рокро╛ройроЩрпНроХро│рпН",
        fruits: "рокро┤роЩрпНроХро│рпН",
        scheduleBtn: "роХро▓рпНро╡ро┐ роЕроЯрпНроЯро╡рогрпИ",
        trackerBtn: "роЙрогро╡рпБ роХрогрпНроХро╛рогро┐рокрпНрокро╛ро│ро░рпН",
        langLabel: "роорпКро┤ро┐",
        crowdLevelLegend: "роХрпВроЯрпНроЯ роиро┐ро▓рпИ роЪро┐ройрпНройроорпН",
        low: "роХрпБро▒рпИро╡рпБ",
        medium: "роироЯрпБродрпНродро░",
        high: "роЕродро┐роХ",
        weekend: "ро╡ро╛ро░ роЗро▒рпБродро┐",
        days: ["роЮро╛", "родро┐", "роЪрпЖ", "рокрпБ", "ро╡ро┐", "ро╡рпЖ", "роЪ"],
        pickFoodcourt: "роЙроЩрпНроХро│рпН роЙрогро╡роХродрпНродрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН",
        salesAvailable: "роХро┐роЯрпИроХрпНроХрпБроорпН ро╡ро┐ро▒рпНрокройрпИ",
        timePeriod: "роирпЗро░ роХро╛ро▓роорпН",
        time1: "роХро╛ро▓рпИ 8 роорогро┐-10 роорогро┐",
        time2: "роХро╛ро▓рпИ 10 роорогро┐-12 роорогро┐",
        time3: "роородро┐ропроорпН 12 роорогро┐-3 роорогро┐",
        time4: "рооро╛ро▓рпИ 3 роорогро┐-5 роорогро┐",
        time5: "рооро╛ро▓рпИ 5 роорогро┐-7 роорогро┐",
        chineseMenuTitle: "роЪрпАрой роЙрогро╡рпБ роорпЖройрпБ",
        gpsTitle: "роЪро┐роЩрпНроХрокрпНрокрпВро░рпН рокро╛ро▓ро┐роЯрпЖроХрпНройро┐роХрпН GPS ро╡ро░рпИрокроЯроорпН",
        gpsHint: "роЗроЯродрпНродрпИ рокро╛ро░рпНроХрпНроХ роЙрогро╡роХ рокрпКродрпНродро╛ройрпИ роЕро┤рпБродрпНродро╡рпБроорпН",
        foodCourts: {
            fc1: "роЙрогро╡роХроорпН 1",
            fc2: "роЙрогро╡роХроорпН 2",
            fc3: "роЙрогро╡роХроорпН 3",
            fc4: "роЙрогро╡роХроорпН 4",
            fc6: "роЙрогро╡роХроорпН 6"
        },
        stalls: {
            "fc1-ban-mian-fish-soup": "рокро╛ройрпН рооро┐ропро╛ройрпН / роорпАройрпН роЪрпВрокрпН (роЙрогро╡роХроорпН 1)",
            "fc1-economy-rice": "рокрпКро░рпБро│ро╛родро╛ро░ роЕро░ро┐роЪро┐ / роХро╛ропрпН рокрпКроЩрпНроХрпН (роЙрогро╡роХроорпН 1)",
            "fc2-economy-rice": "рокрпКро░рпБро│ро╛родро╛ро░ роЕро░ро┐роЪро┐ / роХро╛ропрпН рокрпКроЩрпНроХрпН (роЙрогро╡роХроорпН 2)",
            "fc3-chinese-cuisine": "роЪрпАрой роЙрогро╡рпБ роХроЯрпИ (роЙрогро╡роХроорпН 3)",
            "fc3-sp-mini-wok": "SP рооро┐ройро┐ ро╡рпЛроХрпН (роЙрогро╡роХроорпН 3)",
            "fc4-taiwanese-chinese": "родрпИро╡ро╛ройро┐роп / роЪрпАрой рокро╛рогро┐ роХроЯрпИ (роЙрогро╡роХроорпН 4)",
            "fc4-happiness-sunbo": "ро╣ро╛рокрпНрокро┐ройро╕рпН роЪройрпНрокрпЛ роЪро┐роХрпНроХройрпН ро░рпИро╕рпН (роЙрогро╡роХроорпН 4)",
            "fc6-noodle-chinese": "роЪрпАрой рокро╛рогро┐ роирпВроЯрпБро▓рпН ро╡ро┐ро░рпБрокрпНрокроЩрпНроХро│рпН (роЙрогро╡роХроорпН 6)"
        }
    },
    ms: {
        menuTitle: "Menu Dewan Makan",
        chinese: "Cina",
        malay: "Melayu",
        western: "Barat",
        korean: "Korea",
        japanese: "Jepun",
        desserts: "Pencuci Mulut",
        drinks: "Minuman",
        fruits: "Buah-buahan",
        scheduleBtn: "Jadual Akademik",
        trackerBtn: "Penjejak Makanan",
        langLabel: "Bahasa",
        crowdLevelLegend: "Tahap Kesesakan Legenda",
        low: "Rendah",
        medium: "Sederhana",
        high: "Tinggi",
        weekend: "Hujung Minggu",
        days: ["Ahd", "Isn", "Sel", "Rab", "Kha", "Jum", "Sab"],
        pickFoodcourt: "Pilih Dewan Makan Anda",
        salesAvailable: "Jualan Tersedia",
        timePeriod: "Tempoh Masa",
        time1: "8 pagi-10 pagi",
        time2: "10 pagi-12 tengah hari",
        time3: "12 tengah hari-3 petang",
        time4: "3 petang-5 petang",
        time5: "5 petang-7 malam",
        chineseMenuTitle: "Menu Makanan Cina",
        gpsTitle: "Peta GPS Politeknik Singapura",
        gpsHint: "Tekan butang dewan makan untuk melihat lokasi",
        foodCourts: {
            fc1: "Dewan Makan 1",
            fc2: "Dewan Makan 2",
            fc3: "Dewan Makan 3",
            fc4: "Dewan Makan 4",
            fc6: "Dewan Makan 6"
        },
        stalls: {
            "fc1-ban-mian-fish-soup": "Gerai Ban Mian / Sup Ikan (FC1)",
            "fc1-economy-rice": "Gerai Nasi Campur / Cai Png (FC1)",
            "fc2-economy-rice": "Gerai Nasi Campur / Cai Png (FC2)",
            "fc3-chinese-cuisine": "Gerai Masakan Cina (FC3)",
            "fc3-sp-mini-wok": "SP Mini Wok (FC3)",
            "fc4-taiwanese-chinese": "Gerai Taiwan / Cina (FC4)",
            "fc4-happiness-sunbo": "Happiness Sunbo Nasi Ayam (FC4)",
            "fc6-noodle-chinese": "Pilihan Mee Cina (FC6)"
        }
    }
};

const stallTranslations = {
    en: {
        labels: {
            price: "Price",
            rating: "Rating",
            unavailable: "Menu data unavailable. Please try another stall."
        },
        stalls: {
            "fc1-ban-mian-fish-soup": {
                name: "Ban Mian / Fish Soup Stall (FC1)",
                items: [
                    {
                        name: "Ban Mian",
                        comment: "Very chewy noodles and comforting soup. Uncle is friendly!"
                    },
                    {
                        name: "Sliced Fish Soup with Rice",
                        comment: "Healthy, comforting choice. Perfect on rainy days."
                    }
                ]
            },
            "fc1-economy-rice": {
                name: "Mixed Rice / Cai Png Stall (FC1)",
                items: [
                    {
                        name: "2 Veg + 1 Meat Cai Png",
                        comment: "Generous portions. Sweet and sour pork is highly recommended."
                    }
                ]
            },
            "fc2-economy-rice": {
                name: "Economy Rice / Cai Png Stall (FC2)",
                items: [
                    {
                        name: "Mixed Rice with Drumstick",
                        comment: "One of the best drumsticks on campus. Long queues but worth it."
                    }
                ]
            },
            "fc3-chinese-cuisine": {
                name: "Chinese Cuisine Stall (FC3)",
                items: [
                    {
                        name: "Steamed Dumplings (Jiaozi)",
                        comment: "Authentic potstickers with great filling."
                    },
                    {
                        name: "Pan-fried Dumplings (Guotie)",
                        comment: "Crispy base and juicy inside. A student favourite."
                    }
                ]
            },
            "fc3-sp-mini-wok": {
                name: "SP Mini Wok (FC3)",
                items: [
                    {
                        name: "Salted Egg Chicken Rice",
                        comment: "Legendary status. 10/10 flavour but always long queues."
                    },
                    {
                        name: "Mala Chicken Rice",
                        comment: "Spicy and addictive. Not for the faint-hearted."
                    }
                ]
            },
            "fc4-taiwanese-chinese": {
                name: "Taiwanese / Chinese-style Stall (FC4)",
                items: [
                    {
                        name: "Chicken Cutlet Rice",
                        comment: "Chicken cutlet is the bomb. Crispy and satisfying."
                    },
                    {
                        name: "Braised Pork Rice (Lu Rou Fan)",
                        comment: "Flavour is good but portion can be inconsistent."
                    }
                ]
            },
            "fc4-happiness-sunbo": {
                name: "Happiness Sunbo Chicken Rice (FC4)",
                items: [
                    {
                        name: "Standard Chicken Rice",
                        comment: "Cheapest chicken rice in SP. Chili sauce is super punchy."
                    }
                ]
            },
            "fc6-noodle-chinese": {
                name: "Chinese-style Noodle Options (FC6)",
                items: [
                    {
                        name: "Fish Ball Noodles",
                        comment: "Affordable and filling. Great for tight budgets."
                    },
                    {
                        name: "Wanton Noodle Soup",
                        comment: "Basic but filling. No frills student meal."
                    }
                ]
            }
        }
    },
    zh: {
        labels: {
            price: "ф╗╖ца╝",
            rating: "шпДхИЖ",
            unavailable: "шПЬхНХцХ░цНоф╕НхПпчФия╝Мшп╖щАЙцЛйхЕ╢ф╗ЦцСКф╜НуАВ"
        },
        stalls: {
            "fc1-ban-mian-fish-soup": {
                name: "цЭ┐щЭв / щ▒╝ц▒дцСКф╜Н(щгЯщШБ1)",
                items: [
                    {
                        name: "цЭ┐щЭв",
                        comment: "щЭвцЭбх╛ИцЬЙхЪ╝хК▓я╝Мц▒дх╛ИцЪЦшГГя╝МшАБцЭ┐х╛Иф║▓хИЗуАВ"
                    },
                    {
                        name: "щ▒╝чЙЗц▒дщЕНщен",
                        comment: "ц╕Ец╖бхПИхБех║╖я╝Мф╕ЛщЫихдйх╛ИщАВхРИуАВ"
                    }
                ]
            },
            "fc1-economy-rice": {
                name: "ч╗Пц╡Ощен / шПЬщен(щгЯщШБ1)",
                items: [
                    {
                        name: "ф╕дшПЬф╕АшВЙшПЬщен",
                        comment: "хИЖщЗПхНБш╢│я╝Мч│ЦщЖЛчМкшВЙх╛Ихе╜хРГуАВ"
                    }
                ]
            },
            "fc2-economy-rice": {
                name: "ч╗Пц╡Ощен / шПЬщенцСКф╜Н (щгЯщШБ2)",
                items: [
                    {
                        name: "щ╕бшЕ┐ц╖╖хРИщен",
                        comment: "цабхЫнцЬАхе╜чЪДщ╕бшЕ┐ф╣Лф╕АуАВцОТщХ┐щШЯф╜ЖхА╝х╛ЧуАВ"
                    }
                ]
            },
            "fc3-chinese-cuisine": {
                name: "ф╕нх╝Пч╛ОщгЯцСКф╜Н (щгЯщШБ3)",
                items: [
                    {
                        name: "ц░┤ще║ (Jiaozi)",
                        comment: "цнгхоЧщФЕш┤┤я╝МщжЕцЦЩх╛Ихе╜уАВ"
                    },
                    {
                        name: "чЕОще║ (Guotie)",
                        comment: "х║ХщГищЕешДЖя╝МхЖЕщГихдЪц▒БуАВхнжчФЯцЬАчИ▒уАВ"
                    }
                ]
            },
            "fc3-sp-mini-wok": {
                name: "SP х░ПчВТ (щгЯщШБ3)",
                items: [
                    {
                        name: "хТ╕шЫЛщ╕бщен",
                        comment: "ф╝ахеЗхЬ░ф╜НуАВ10/10 хС│щБУф╜ЖцА╗цШпцОТщХ┐щШЯуАВ"
                    },
                    {
                        name: "щ║╗ш╛гщ╕бщен",
                        comment: "ш╛гшАМф╕КчШ╛уАВф╕НщАВхРИшГЖх░ПчЪДф║║уАВ"
                    }
                ]
            },
            "fc4-taiwanese-chinese": {
                name: "хП░ц╣╛ / ф╕нх╝ПцСКф╜Н (щгЯщШБ4)",
                items: [
                    {
                        name: "щ╕бцОТщен",
                        comment: "щ╕бцОТчВ╕х╛Чх╛Ихе╜уАВщЕешДЖшАМц╗бш╢│уАВ"
                    },
                    {
                        name: "хНдшВЙщен (Lu Rou Fan)",
                        comment: "хС│щБУф╕НщФЩф╜Жф╗╜щЗПхПпшГ╜ф╕Нф╕АшЗ┤уАВ"
                    }
                ]
            },
            "fc4-happiness-sunbo": {
                name: "х╣╕чжПщб║хоЭщ╕бщен (щгЯщШБ4)",
                items: [
                    {
                        name: "цаЗхЗЖщ╕бщен",
                        comment: "SP цЬАф╛┐хоЬчЪДщ╕бщенуАВш╛гщЕ▒ш╢Еч║зхК▓щБУуАВ"
                    }
                ]
            },
            "fc6-noodle-chinese": {
                name: "ф╕нх╝ПщЭвцЭбщАЙщб╣ (щгЯщШБ6)",
                items: [
                    {
                        name: "щ▒╝ф╕╕щЭв",
                        comment: "хоЮцГашАМще▒шЕ╣уАВщАВхРИщвДчоЧч┤зх╝ачЪДхнжчФЯуАВ"
                    },
                    {
                        name: "ф║СхРЮщЭвц▒д",
                        comment: "хЯ║цЬмф╜Жще▒шЕ╣уАВц▓бцЬЙхдЪф╜ЩчЪДхнжчФЯщдРуАВ"
                    }
                ]
            }
        }
    },
    ta: {
        labels: {
            price: "ро╡ро┐ро▓рпИ",
            rating: "роородро┐рокрпНрокрпАроЯрпБ",
            unavailable: "роорпЖройрпБ роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ. ро╡рпЗро▒рпБ роХроЯрпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН."
        },
        stalls: {
            "fc1-ban-mian-fish-soup": {
                name: "рокро╛ройрпН рооро┐ропро╛ройрпН / роорпАройрпН роЪрпВрокрпН (роЙрогро╡роХроорпН 1)",
                items: [
                    {
                        name: "рокро╛ройрпН рооро┐ропро╛ройрпН",
                        comment: "роирпВроЯрпБро▓рпНро╕рпН роорпЖройрпНроорпИропро╛роХро╡рпБроорпН роЪрпВрокрпН роЪрпБро╡рпИропро╛роХро╡рпБроорпН роЙро│рпНро│родрпБ."
                    },
                    {
                        name: "роорпАройрпН родрпБрогрпНроЯрпБ роЪрпВрокрпН роЪро╛родроорпН",
                        comment: "роЖро░рпЛроХрпНроХро┐ропрооро╛рой рооро▒рпНро▒рпБроорпН роЖро▒рпБродро▓рпН родро░рпБроорпН роЙрогро╡рпБ."
                    }
                ]
            },
            "fc1-economy-rice": {
                name: "рокрпКро░рпБро│ро╛родро╛ро░ роЕро░ро┐роЪро┐ / роХро╛ропрпН рокрпКроЩрпНроХрпН (роЙрогро╡роХроорпН 1)",
                items: [
                    {
                        name: "2 роХро╛ропрпНроХро▒ро┐ + 1 роЗро▒рпИроЪрпНроЪро┐ роХро╛ропрпН рокрпКроЩрпНроХрпН",
                        comment: "рокрпЖро░ро┐роп роЕро│ро╡рпБроХро│рпН. роЪрпАройро┐ рооро▒рпНро▒рпБроорпН рокрпБро│ро┐рокрпНрокрпБ рокройрпНро▒ро┐ роЗро▒рпИроЪрпНроЪро┐ рооро┐роХро╡рпБроорпН рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ."
                    }
                ]
            },
            "fc2-economy-rice": {
                name: "рокрпКро░рпБро│ро╛родро╛ро░ роЕро░ро┐роЪро┐ / роХро╛ропрпН рокрпКроЩрпНроХрпН (роЙрогро╡роХроорпН 2)",
                items: [
                    {
                        name: "роХрпКро┤рпБрокрпНрокрпБ роХро╛ро▓рпБроЯройрпН роХро▓роирпНрод роЕро░ро┐роЪро┐",
                        comment: "ро╡ро│ро╛роХродрпНродро┐ро▓рпН роЪро┐ро▒роирпНрод роХрпКро┤рпБрокрпНрокрпБ роХро╛ро▓рпНроХро│ро┐ро▓рпН роТройрпНро▒рпБ. роирпАрогрпНроЯ ро╡ро░ро┐роЪрпИроХро│рпН роЖройро╛ро▓рпН роородро┐рокрпНрокрпБ роЙро│рпНро│родрпБ."
                    }
                ]
            },
            "fc3-chinese-cuisine": {
                name: "роЪрпАрой роЙрогро╡рпБ роХроЯрпИ (роЙрогро╡роХроорпН 3)",
                items: [
                    {
                        name: "роЖро╡ро┐ропро┐ро▓рпН ро╡рпЗроХро╡рпИроХрпНроХрокрпНрокроЯрпНроЯ роЯроорпНрокрпНро▓ро┐роЩрпНро╕рпН (Jiaozi)",
                        comment: "роЕроЪро▓рпН рокрпЛроЯрпНро╕рпНроЯро┐роХрпНроХро░рпНроХро│рпН роиро▓рпНро▓ роиро┐ро░рокрпНрокро▓рпБроЯройрпН."
                    },
                    {
                        name: "рокро╛ройрпН-рокро┐ро░рпИроЯрпН роЯроорпНрокрпНро▓ро┐роЩрпНро╕рпН (Guotie)",
                        comment: "роХро┐ро░ро┐ро╕рпНрокро┐ роЕроЯро┐рокрпНрокроХрпБродро┐ рооро▒рпНро▒рпБроорпН роЪрпВро╕рпН роЙроЯрпНрокрпБро▒роорпН. рооро╛рогро╡ро░рпНроХро│ро┐ройрпН рокро┐роЯро┐родрпНродродрпБ."
                    }
                ]
            },
            "fc3-sp-mini-wok": {
                name: "SP рооро┐ройро┐ ро╡рпЛроХрпН (роЙрогро╡роХроорпН 3)",
                items: [
                    {
                        name: "роЙрокрпНрокрпБ роорпБроЯрпНроЯрпИ роЪро┐роХрпНроХройрпН ро░рпИро╕рпН",
                        comment: "рокрпБро░ро╛рог роиро┐ро▓рпИ. 10/10 роЪрпБро╡рпИ роЖройро╛ро▓рпН роОрокрпНрокрпЛродрпБроорпН роирпАрогрпНроЯ ро╡ро░ро┐роЪрпИроХро│рпН."
                    },
                    {
                        name: "рооро╛ро▓ро╛ роЪро┐роХрпНроХройрпН ро░рпИро╕рпН",
                        comment: "роХро╛ро░рооро╛рой рооро▒рпНро▒рпБроорпН рокрпЛродрпИроХрпНроХрпБ роЙро│рпНро│ро╛роХрпНроХрпБроорпН. рокропроирпНродро╡ро░рпНроХро│рпБроХрпНроХрпБ роЗро▓рпНро▓рпИ."
                    }
                ]
            },
            "fc4-taiwanese-chinese": {
                name: "родрпИро╡ро╛ройро┐роп / роЪрпАрой рокро╛рогро┐ роХроЯрпИ (роЙрогро╡роХроорпН 4)",
                items: [
                    {
                        name: "роЪро┐роХрпНроХройрпН роХроЯрпНро▓рпЖроЯрпН ро░рпИро╕рпН",
                        comment: "роЪро┐роХрпНроХройрпН роХроЯрпНро▓рпЖроЯрпН роЕро░рпБроорпИ. роХро┐ро░ро┐ро╕рпНрокро┐ рооро▒рпНро▒рпБроорпН родро┐ро░рпБрокрпНродро┐роХро░рооро╛рой."
                    },
                    {
                        name: "рокро┐ро░рпЗро╕рпНроЯрпН рокро╛ро░рпНроХрпН ро░рпИро╕рпН (Lu Rou Fan)",
                        comment: "роЪрпБро╡рпИ роиро▓рпНро▓родрпБ роЖройро╛ро▓рпН роЕро│ро╡рпБ рооро╛ро▒рпБрокроЯро▓ро╛роорпН."
                    }
                ]
            },
            "fc4-happiness-sunbo": {
                name: "ро╣ро╛рокрпНрокро┐ройро╕рпН роЪройрпНрокрпЛ роЪро┐роХрпНроХройрпН ро░рпИро╕рпН (роЙрогро╡роХроорпН 4)",
                items: [
                    {
                        name: "роиро┐ро▓рпИропро╛рой роЪро┐роХрпНроХройрпН ро░рпИро╕рпН",
                        comment: "SP роЗро▓рпН рооро┐роХро╡рпБроорпН рооро▓ро┐ро╡ро╛рой роЪро┐роХрпНроХройрпН ро░рпИро╕рпН. роЪро┐ро▓ро┐ роЪро╛ро╕рпН рооро┐роХро╡рпБроорпН роХроЯрпБроорпИропро╛ройродрпБ."
                    }
                ]
            },
            "fc6-noodle-chinese": {
                name: "роЪрпАрой рокро╛рогро┐ роирпВроЯрпБро▓рпН ро╡ро┐ро░рпБрокрпНрокроЩрпНроХро│рпН (роЙрогро╡роХроорпН 6)",
                items: [
                    {
                        name: "роорпАройрпН рокро╛ро▓рпН роирпВроЯрпБро▓рпНро╕рпН",
                        comment: "рооро▓ро┐ро╡ро╛рой рооро▒рпНро▒рпБроорпН роиро┐ро░рокрпНрокрпБроорпН. роХроЯрпБроорпИропро╛рой рокроЯрпНроЬрпЖроЯрпНроЯрпБроХро│рпБроХрпНроХрпБ роЪро┐ро▒роирпНродродрпБ."
                    },
                    {
                        name: "ро╡ро╛ройрпНроЯройрпН роирпВроЯрпБро▓рпН роЪрпВрокрпН",
                        comment: "роЕроЯро┐рокрпНрокроЯрпИ роЖройро╛ро▓рпН роиро┐ро░рокрпНрокрпБроорпН. роОро│ро┐роорпИропро╛рой рооро╛рогро╡ро░рпН роЙрогро╡рпБ."
                    }
                ]
            }
        }
    },
    ms: {
        labels: {
            price: "Harga",
            rating: "Penilaian",
            unavailable: "Menu tidak tersedia. Sila pilih gerai lain."
        },
        stalls: {
            "fc1-ban-mian-fish-soup": {
                name: "Gerai Ban Mian / Sup Ikan (FC1)",
                items: [
                    {
                        name: "Ban Mian",
                        comment: "Mi kenyal dan sup yang menyenangkan."
                    },
                    {
                        name: "Sup Ikan dengan Nasi",
                        comment: "Pilihan sihat dan mengenyangkan."
                    }
                ]
            },
            "fc1-economy-rice": {
                name: "Gerai Nasi Campur / Cai Png (FC1)",
                items: [
                    {
                        name: "2 Sayur + 1 Daging Cai Png",
                        comment: "Bahagian yang murah hati. Daging babi manis dan masam sangat disyorkan."
                    }
                ]
            },
            "fc2-economy-rice": {
                name: "Gerai Nasi Campur / Cai Png (FC2)",
                items: [
                    {
                        name: "Nasi Campur dengan Paha Ayam",
                        comment: "Salah satu paha ayam terbaik di kampus. Barisan panjang tetapi berbaloi."
                    }
                ]
            },
            "fc3-chinese-cuisine": {
                name: "Gerai Masakan Cina (FC3)",
                items: [
                    {
                        name: "Dumpling Kukus (Jiaozi)",
                        comment: "Potsticker asli dengan isian yang hebat."
                    },
                    {
                        name: "Dumpling Goreng (Guotie)",
                        comment: "Dasar rangup dan dalaman juicy. Kegemaran pelajar."
                    }
                ]
            },
            "fc3-sp-mini-wok": {
                name: "SP Mini Wok (FC3)",
                items: [
                    {
                        name: "Nasi Ayam Telur Masin",
                        comment: "Status legenda. 10/10 rasa tetapi selalu barisan panjang."
                    },
                    {
                        name: "Nasi Ayam Mala",
                        comment: "Pedas dan ketagihan. Bukan untuk yang lemah hati."
                    }
                ]
            },
            "fc4-taiwanese-chinese": {
                name: "Gerai Taiwan / Cina (FC4)",
                items: [
                    {
                        name: "Nasi Ayam Goreng",
                        comment: "Ayam goreng adalah bom. Rangup dan memuaskan."
                    },
                    {
                        name: "Nasi Daging Babi Rebus (Lu Rou Fan)",
                        comment: "Rasa baik tetapi bahagian boleh tidak konsisten."
                    }
                ]
            },
            "fc4-happiness-sunbo": {
                name: "Happiness Sunbo Nasi Ayam (FC4)",
                items: [
                    {
                        name: "Nasi Ayam Standard",
                        comment: "Nasi ayam termurah di SP. Sos cili sangat kuat."
                    }
                ]
            },
            "fc6-noodle-chinese": {
                name: "Pilihan Mee Cina (FC6)",
                items: [
                    {
                        name: "Mee Bola Ikan",
                        comment: "Murah dan mengenyangkan. Hebat untuk bajet ketat."
                    },
                    {
                        name: "Sup Mee Wantan",
                        comment: "Asas tetapi mengenyangkan. Makanan pelajar tanpa bumbu."
                    }
                ]
            }
        }
    }
};

const infoTranslations = {
    en: {
        selectDate: "Select a date to see details.",
        academicDay: "Academic Day",
        vacation: "Vacation Period",
        midTests: "Mid-Semester Tests",
        midVacation: "Mid-Semester Vacation",
        term2: "Term 2 Classes Begin",
    },
    zh: {
        selectDate: "щАЙцЛйцЧецЬЯф╗ецЯечЬЛшпжч╗Жф┐бцБпуАВ",
        academicDay: "ф╕Кшп╛цЧе",
        vacation: "хБЗцЬЯ",
        midTests: "цЬЯф╕ншАГшпХ",
        midVacation: "цЬЯф╕нхБЗцЬЯ",
        term2: "чммф║МхнжцЬЯх╝АхзЛ",
    },
    ta: {
        selectDate: "ро╡ро┐ро╡ро░роЩрпНроХро│рпИ рокро╛ро░рпНроХрпНроХ родрпЗродро┐ропрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН.",
        academicDay: "роХро▓рпНро╡ро┐ роиро╛ро│рпН",
        vacation: "ро╡ро┐роЯрпБроорпБро▒рпИ",
        midTests: "роироЯрпБродрпНродро░ рокро░рпАроЯрпНроЪрпИроХро│рпН",
        midVacation: "роироЯрпБродрпНродро░ ро╡ро┐роЯрпБроорпБро▒рпИ",
        term2: "2роЖроорпН рокро░рпБро╡ ро╡роХрпБрокрпНрокрпБроХро│рпН родрпБро╡роЩрпНроХрпБроорпН",
    },
    ms: {
        selectDate: "Pilih tarikh untuk melihat butiran.",
        academicDay: "Hari Akademik",
        vacation: "Tempoh Cuti",
        midTests: "Ujian Pertengahan Semester",
        midVacation: "Cuti Pertengahan Semester",
        term2: "Kelas Semester 2 Bermula",
    }
};

document.addEventListener("DOMContentLoaded", () => {

    /* ==================
       INDEX PAGE LOGIC
    =====================*/

    const scheduleBtn = document.getElementById("scheduleBtn");
    if (scheduleBtn) {
        scheduleBtn.addEventListener("click", () => {
            window.location.href = "schedule.html";
        });
    }

    const trackerBtn = document.getElementById("trackerBtn");
    if (trackerBtn) {
        trackerBtn.addEventListener("click", () => {
            window.location.href = "foodcourt.html";
        });
    }

    const closingHourBtn = document.getElementById("closingHourBtn");
    if (closingHourBtn) {
        closingHourBtn.addEventListener("click", () => {
            window.location.href = "closinghour.html";
        });
    }

    const chineseCard = document.getElementById("chinese");
    if (chineseCard) {
        chineseCard.addEventListener("click", () => {
            window.location.href = "chinese.html";
        });
    }

    const malayCard = document.getElementById("malay");
    if (malayCard) {
        malayCard.addEventListener("click", () => {
            window.location.href = "malay.html";
        });
    }

    const koreanCard = document.getElementById("korean");
    if (koreanCard) {
        koreanCard.addEventListener("click", () => {
            window.location.href = "korean.html";
        });
    }

    const westernCard = document.getElementById("western");
    if (westernCard) {
        westernCard.addEventListener("click", () => {
            window.location.href = "western.html";
        });
    }

    const japaneseCard = document.getElementById("japanese");
    if (japaneseCard) {
        japaneseCard.addEventListener("click", () => {
            window.location.href = "japanese.html";
        });
    }

    const dessertsCard = document.getElementById("desserts");
    if (dessertsCard) {
        dessertsCard.addEventListener("click", () => {
            window.location.href = "desserts.html";
        });
    }

    const drinksCard = document.getElementById("drinks");
    if (drinksCard) {
        drinksCard.addEventListener("click", () => {
            window.location.href = "drinks.html";
        });
    }

    const fruitsAndVegetablesCard = document.getElementById("fruits");
    if (fruitsAndVegetablesCard) {
        fruitsAndVegetablesCard.addEventListener("click", () => {
            window.location.href = "FruitsAndVegetables.html";
        });
    }

    /* ============================
       CHINESE PAGE LOGIC
    ============================ */
    if (document.getElementById("chineseMenuTitle")) {

        const stallButtons = document.querySelectorAll(".stall-btn");
        const foodCards = document.getElementById("food-cards");

        const stallData = {
        /* ===== FC1 ===== */
        "fc1-ban-mian-fish-soup": {
            name: "Ban Mian / Fish Soup Stall (FC1)",
            items: [
                {
                    name: "Ban Mian",
                    price: "$3.00",
                    rating: "4.2",
                    comment: "Very chewy noodles and comforting soup. Uncle is friendly!",
                    image: "static/images/ban_mian.jpg"
                },
                {
                    name: "Sliced Fish Soup with Rice",
                    price: "$5.00",
                    rating: "4.2",
                    comment: "Healthy, comforting choice. Perfect on rainy days.",
                    image: "static/images/fish_soup.jpg"
                }
            ]
        },

        "fc1-economy-rice": {
            name: "Mixed Rice / Cai Png Stall (FC1)",
            items: [
                {
                    name: "2 Veg + 1 Meat Cai Png",
                    price: "$3.00 - $3.50",
                    rating: "3.9",
                    comment: "Generous portions. Sweet and sour pork is highly recommended.",
                    image: "static/images/mixed_rice.jpg"
                }
            ]
        },

        /* ===== FC2 ===== */
        "fc2-economy-rice": {
            name: "Economy Rice / Cai Png Stall (FC2)",
            items: [
                {
                    name: "Mixed Rice with Drumstick",
                    price: "$2.50 - $4.00",
                    rating: "4.1",
                    comment: "One of the best drumsticks on campus. Long queues but worth it.",
                    image: "static/images/mixed_rice.jpg"
                }
            ]
        },

        /* ===== FC3 ===== */
        "fc3-chinese-cuisine": {
            name: "Chinese Cuisine Stall (FC3)",
            items: [
                {
                    name: "Steamed Dumplings (Jiaozi)",
                    price: "~$5.60 (8 pcs)",
                    rating: "4.1",
                    comment: "Authentic potstickers with great filling.",
                    image: "static/images/steamed_dumplings.jpg"
                },
                {
                    name: "Pan-fried Dumplings (Guotie)",
                    price: "~$5.60 (8 pcs)",
                    rating: "4.1",
                    comment: "Crispy base and juicy inside. A student favourite.",
                    image: "static/images/pan_fried_dumplings.jpg"
                }
            ]
        },

        "fc3-sp-mini-wok": {
            name: "SP Mini Wok (FC3)",
            items: [
                {
                    name: "Salted Egg Chicken Rice",
                    price: "$4.30 - $4.50",
                    rating: "4.5",
                    comment: "Legendary status. 10/10 flavour but always long queues.",
                    image: "static/images/salted_egg_chicken_rice.jpg"
                },
                {
                    name: "Mala Chicken Rice",
                    price: "$4.30",
                    rating: "4.5",
                    comment: "Spicy and addictive. Not for the faint-hearted.",
                    image: "static/images/mala_chicken_rice.jpg"
                }
            ]
        },

        /* ===== FC4 ===== */
        "fc4-taiwanese-chinese": {
            name: "Taiwanese / Chinese-style Stall (FC4)",
            items: [
                {
                    name: "Chicken Cutlet Rice",
                    price: "$4.20 - $4.80",
                    rating: "4.1",
                    comment: "Chicken cutlet is the bomb. Crispy and satisfying.",
                    image: "static/images/chicken_cutlet_rice.jpg"
                },
                {
                    name: "Braised Pork Rice (Lu Rou Fan)",
                    price: "$4.20 - $4.80",
                    rating: "4.1",
                    comment: "Flavour is good but portion can be inconsistent.",
                    image: "static/images/braised_pork_rice.jpg"
                }
            ]
        },

        "fc4-happiness-sunbo": {
            name: "Happiness Sunbo Chicken Rice (FC4)",
            items: [
                {
                    name: "Standard Chicken Rice",
                    price: "~$3.00",
                    rating: "4.3",
                    comment: "Cheapest chicken rice in SP. Chili sauce is super punchy.",
                    image: "static/images/chicken_rice.jpg"
                }
            ]
        },

        /* ===== FC6 ===== */
        "fc6-noodle-chinese": {
            name: "Chinese-style Noodle Options (FC6)",
            items: [
                {
                    name: "Fish Ball Noodles",
                    price: "$2.00 - $3.00",
                    rating: "3.7",
                    comment: "Affordable and filling. Great for tight budgets.",
                    image: "static/images/fish_ball_noodles.jpg"
                },
                {
                    name: "Wanton Noodle Soup",
                    price: "$3.00",
                    rating: "3.7",
                    comment: "Basic but filling. No frills student meal.",
                    image: "static/images/wanton_noodle_soup.jpg"
                }
            ]
        }
    };

    let currentLang = 'en';

    const languageDropdown = document.getElementById("languageDropdown");

    function applyLanguage(lang) {
        const t = translations[lang];
        if (!t) return;

        /* Navbar */
        const langLabel = document.getElementById("langLabel");
        if (langLabel) langLabel.textContent = t.langLabel;

        /* Chinese page */
        const title = document.getElementById("chineseMenuTitle");
        if (title) title.textContent = t.chineseMenuTitle;

        const gpsTitle = document.getElementById("gpsTitle");
        if (gpsTitle) gpsTitle.textContent = t.gpsTitle;

        const gpsHint = document.getElementById("gpsHint");
        if (gpsHint) gpsHint.textContent = t.gpsHint;

        /* Food court buttons */
        const fc1 = document.getElementById("fc1");
        const fc2 = document.getElementById("fc2");
        const fc3 = document.getElementById("fc3");
        const fc4 = document.getElementById("fc4");
        const fc6 = document.getElementById("fc6");

        if (fc1) fc1.textContent = t.foodCourts.fc1;
        if (fc2) fc2.textContent = t.foodCourts.fc2;
        if (fc3) fc3.textContent = t.foodCourts.fc3;
        if (fc4) fc4.textContent = t.foodCourts.fc4;
        if (fc6) fc6.textContent = t.foodCourts.fc6;

        /* Stall buttons */
        stallButtons.forEach(btn => {
            const stallKey = btn.dataset.stall;
            if (t.stalls && t.stalls[stallKey]) {
                btn.textContent = t.stalls[stallKey];
            }
        });
    }

    /* Trigger on change */
    if (languageDropdown) {
        languageDropdown.addEventListener("change", e => {
            currentLang = e.target.value;
            applyLanguage(currentLang);
        });
    }

    /* ===== Stall Button Click ===== */
    stallButtons.forEach(btn => {
    btn.addEventListener("click", () => {

        const stallKey = btn.dataset.stall;
        const stall = stallData[stallKey];

        // ЁЯЫС SAFETY CHECK
        if (!stall || !stall.items) {
            console.error("Stall data not found:", stallKey);
            foodCards.innerHTML = `
                <p style="color:red; text-align:center;">
                    ${stallTranslations[currentLang]?.labels?.unavailable || stallTranslations.en.labels.unavailable}
                </p>
            `;
            foodCards.style.display = "block";
            return;
        }

        const gridClass = stall.items.length === 1
            ? "cards-grid single"
            : "cards-grid";

        const langStall = stallTranslations[currentLang]?.stalls[stallKey] || stallTranslations.en.stalls[stallKey];

        const labels = stallTranslations[currentLang]?.labels || stallTranslations.en.labels;

        foodCards.innerHTML = `<h3>${langStall.name}</h3><div class="${gridClass}">`;

        stall.items.forEach((item, index) => {
            const translatedItem =
            langStall.items[index] || stall.items[index];

            foodCards.innerHTML += `
            <div class="food-card">
                <img src="${item.image}"
                     alt="${translatedItem.name}"
                     onerror="this.src='static/images/placeholder.jpg'">

                <div class="food-name">${translatedItem.name}</div>

                <div class="food-details">
                    <p><strong>${labels.price}:</strong> ${item.price}</p>
                    <p><strong>${labels.rating}:</strong> ${item.rating} тнР</p>
                    <p><em>"${translatedItem.comment}"</em></p>
                </div>
            </div>
        `;   
        });

        foodCards.innerHTML += `</div>`;
        foodCards.style.display = "block";

        foodCards.classList.remove("fade-out");
        foodCards.classList.add("fade-in");

        foodCards.scrollIntoView({ behavior: "smooth" });
    });
});

        /* ============================
           FOOD COURT MAP NAVIGATION
        ============================ */
        const foodCourtLocations = {
            "Food Court 1": "Singapore Polytechnic Food Court 1",
            "Food Court 2": "Singapore Polytechnic Food Court 2",
            "Food Court 3": "Food Court 3 (Foodgle)",
            "Food Court 4": "Koufu Food Court 4 Singapore Poly",
            "Food Court 6": "Food Canopy - Singapore Poly"
        };

        const fcButtons = document.querySelectorAll(".fc-btn");
        const mapFrame = document.getElementById("spMap");
        const stallButtonsAll = document.querySelectorAll(".stall-btn");

        fcButtons.forEach(btn => {
            btn.addEventListener("click", () => {

                /* Active button highlight */
                fcButtons.forEach(b => b.classList.remove("active"));
                btn.classList.add("active");

                /* Update Map */
                const location = foodCourtLocations[btn.dataset.fc];
                mapFrame.src = `https://www.google.com/maps?q=${encodeURIComponent(location)}&output=embed`;

                /* Fade out food cards */
                if (foodCards.style.display === "block") {
                    foodCards.classList.remove("fade-in");
                    foodCards.classList.add("fade-out");

                    setTimeout(() => {
                        foodCards.style.display = "none";
                    }, 400);
                }

                /* Hide all stall buttons */
                stallButtonsAll.forEach(stallBtn => {
                    stallBtn.style.display = "none";
                });

                /* Show selected stalls */
                stallButtonsAll.forEach(stallBtn => {
                    if (stallBtn.dataset.fc === btn.dataset.fc) {
                        stallBtn.style.display = "inline-block";
                    }
                });
            });
        });
    }

    /* ==================
       FOODCOURT PAGE LOGIC
    =====================*/
    const API_BASE = "https://foodpulse-backend.onrender.com/api";
    const foodcourtGrid = document.querySelector(".foodcourt-grid");
    if (foodcourtGrid) {
        const foodcourtCards = document.querySelectorAll(".foodcourt-card");
        const fcInfoPanel = document.getElementById("fc-info-panel");
        const fcTitle = document.getElementById("fc-title");
        const stallList = document.querySelector(".stall-list");
        const timeButtons = document.querySelectorAll(".time-buttons button");

        // Data for Food Courts with translated descriptions
        const fcData = {
            "Food Court 1": {
                stalls: ["Chicken Rice", "Japanese Curry / Rice Bowls", "Western Cuisine", "Ban Mian / Fish Soup", "Mala Hotpot", "Thai Cuisine", "Yong Tau Foo", "Desserts", "Drinks & Toast Stall"],
                descriptions: {
                    en: ["A student staple", "Very popular", "Pastas, chicken chops", "", "", "Basil chicken, noodles", "", "Ice Kacang etc.", "Main anchor"],
                    zh: ["хнжчФЯф╕╗щгЯ", "щЭЮх╕╕хПЧцмвш┐О", "цДПхдзхИйщЭвя╝Мщ╕бцЙТ", "", "", "ч╜ЧхЛТщ╕бя╝МщЭвцЭб", "", "хЖ░ц▓ЩчнЙчнЙ", "ф╕╗шжБцФпцЯ▒"],
                    ta: ["рооро╛рогро╡ро░рпН роорпБродройрпНроорпИ", "рооро┐роХро╡рпБроорпН рокро┐ро░рокро▓рооро╛рой", "рокро╛ро╕рпНродро╛, роХрпЛро┤ро┐ роЪро╛рокрпН", "", "", "рокрпЗроЪро┐ро▓рпН роХрпЛро┤ро┐, роирпВроЯрпБро▓рпНро╕рпН", "", "роРро╕рпН роХроХро╛роЩрпН роорпБродро▓ро┐ропрой", "роорпБродройрпНроорпИ роЖроЩрпНроХро░рпН"],
                    ms: ["Stap mahasiswa", "Sangat popular", "Pasta, ayam goreng", "", "", "Ayam basil, mi", "", "Ais kacang dll.", "Penambat utama"]
                },
                times: {
                    "8am-10am": [60, 50, 40, 30, 20, 25, 20, 50, 70],
                    "10am-12pm": [95, 90, 85, 80, 70, 75, 60, 90, 95],
                    "12pm-3pm": [100, 95, 90, 85, 80, 75, 70, 95, 100],
                    "3pm-5pm": [40, 30, 35, 25, 20, 30, 25, 40, 45],
                    "5pm-7pm": [20, 15, 25, 10, 5, 15, 10, 20, 25]
                }
            },
            "Food Court 2": {
                stalls: ["Vegetarian Stall", "Indonesian Express", "Japanese Stall", "Korean Stall", "Economic Rice (Cai Fan)", "Yong Tau Foo", "Fish Soup / Ban Mian", "Taiwanese Stall", "Malay / Indian Cuisine", "Drinks & Toast Stall"],
                descriptions: {
                    en: ["Highly rated, known for big portions", "Famous for Ayam Penyet/Ayam Panggang", "Known for affordable Chicken Don/Karaage Don", "Recommended for Hot Stone Bibimbap", "The budget staple", "Each ingredient priced around $0.40 - $0.50", "", "", "Known for Maggie Goreng", "Main anchor"],
                    zh: ["шпДф╗╖х╛ИщлШя╝Мф╗ехдзф╗╜щЗПщЧ╗хРН", "ф╗ещШ┐хдоф╜йхжочЙ╣/щШ┐хдох║ЮхЖИщЧ╗хРН", "ф╗ехоЮцГачЪДщ╕бцЙТщен/хФРцЙмщ╕бщЧ╗хРН", "цОишНРчГнчЯ│цЛМщен", "щвДчоЧф╕╗щгЯ", "цпПчзНщЕНцЦЩф╗╖ца╝ч║ж0.40-0.50ч╛ОхЕГ", "", "", "ф╗еMaggie GorengщЧ╗хРН", "ф╕╗шжБцФпцЯ▒"],
                    ta: ["роЙропро░рпН роородро┐рокрпНрокрпАроЯрпБ, рокрпЖро░ро┐роп рокроЩрпНроХрпБроХро│рпБроХрпНроХрпБ роЕро▒ро┐ропрокрпНрокроЯрпНроЯ", "роЕропроорпН рокрпЖройрпНропроЯрпН/роЕропроорпН рокро╛роЩрпНроХро╛роЩрпНроХро┐ро▒рпНроХрпБ рокро┐ро░рокро▓рооро╛рой", "ро╡ро┐ро▓рпИропро┐ро▓рпНро▓ро╛род роЪро┐роХрпНроХройрпН роЯро╛ройрпН/роХро░ро╛роЬрпН роЯро╛ройрпБроХрпНроХрпБ роЕро▒ро┐ропрокрпНрокроЯрпНроЯ", "ро╣ро╛роЯрпН ро╕рпНроЯрпЛройрпН рокро┐рокро┐роорпНрокро╛рокрпНрокро┐ро▒рпНроХрпБ рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ", "рокроЯрпНроЬрпЖроЯрпН ро╕рпНроЯрпЗрокро┐ро│рпН", "роТро╡рпНро╡рпКро░рпБ рокрпКро░рпБро│рпБроорпН роЪрпБрооро╛ро░рпН $0.40 - $0.50 ро╡ро┐ро▓рпИ", "", "", "роорпЗроХро┐ роХрпЛро░рпЖроЩрпНроХро┐ро▒рпНроХрпБ роЕро▒ро┐ропрокрпНрокроЯрпНроЯ", "роорпБродройрпНроорпИ роЖроЩрпНроХро░рпН"],
                    ms: ["Penilaian tinggi, dikenali untuk bahagian besar", "Terkenal dengan Ayam Penyet/Ayam Panggang", "Dikenali untuk Chicken Don/Karaage Don yang mampu milik", "Disyorkan untuk Hot Stone Bibimbap", "Stap bajet", "Setiap bahan dihargakan sekitar $0.40 - $0.50", "", "", "Dikenali untuk Maggie Goreng", "Penambat utama"]
                },
                times: {
                    "8am-10am": [50, 0, 0, 0, 40, 0, 30, 0, 20, 40],
                    "10am-12pm": [100, 95, 90, 90, 95, 60, 80, 50, 80, 95],
                    "12pm-3pm": [100, 80, 70, 70, 60, 50, 40, 30, 50, 80],
                    "3pm-5pm": [20, 0, 0, 0, 10, 5, 0, 0, 0, 15],
                    "5pm-7pm": [10, 0, 0, 0, 0, 0, 0, 0, 0, 5]
                }
            },
            "Food Court 3": {
                stalls: ["Indonesian Express","SP Mini Wok","Waffle Street","Mr Pasta","Crumbz Up","Mala Xiang Guo","Chinese Cuisine","The Crowded Bowl","Nasi Lemak / Chicken Rice","Drinks & Toast Stall"],
                descriptions: {
                    en: ["Famous for Ayam Penyet and spicy chili","Salted Egg Chicken Rice, Mala Chicken Rice","Large, crispy waffles with various toppings/ice cream","Customizable cream and tomato-based pastas","Acai bowls and healthy granola treats","A student favorite with manageable queues","Known for Jiao Zi / pan-fried dumplings","Vegetarian salad bowls","Halal-certified options available","Known for large Ice Milo and breakfast sets"],
                    zh: ["ф╗ещШ┐хдоф╜йхжочЙ╣хТМш╛гцдТщЧ╗хРН","хТ╕шЫЛщ╕бщеня╝Мщ║╗ш╛гщ╕бщен","хдзшАМшДЖчЪДхНОхдлще╝щЕНхРДчзНщЕНцЦЩ/хЖ░ц╖Зц╖Л","хПпхоЪхИ╢чЪДхе╢ц▓╣хТМчХкшМДщЕ▒цДПхдзхИйщЭв","щШ┐шРиф╝КчвЧхТМхБех║╖ца╝хЕ░шп║цЛЙщЫ╢щгЯ","хнжчФЯцЬАчИ▒я╝МщШЯф╝НхПпчобчРЖ","ф╗еще║хнР/чЕОще║щЧ╗хРН","ч┤ащгЯц▓ЩцЛЙчвЧ","цПРф╛Ыц╕ЕчЬЯшодшпБщАЙщб╣","ф╗ехдзхЖ░ч▒│ц┤ЫхТМцЧйщдРхеЧщдРщЧ╗хРН"],
                    ta: ["роЕропроорпН рокрпЖройрпНропроЯрпН рооро▒рпНро▒рпБроорпН роороЪро╛ро▓ро╛ роЪро┐ро▓ро┐роХрпНроХрпБ рокро┐ро░рокро▓рооро╛рой","роЙрокрпНрокрпБ роорпБроЯрпНроЯрпИ роХрпЛро┤ро┐ роЪро╛родроорпН, рооро╛ро▓ро╛ роХрпЛро┤ро┐ роЪро╛родроорпН","рокро▓рпНро╡рпЗро▒рпБ роЯро╛рокрпНрокро┐роЩрпНро╕рпН/роРро╕рпН роХрпНро░рпАроорпБроЯройрпН рокрпЖро░ро┐роп, роХрпНро░ро┐ро╕рпНрокро┐ ро╡ро╛роГрокро┐ро│рпНро╕рпН","родройро┐рокрпНрокропройрпН роХрпНро░рпАроорпН рооро▒рпНро▒рпБроорпН роЯрпЛроорпЗроЯрпНроЯрпЛ роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓ро╛рой рокро╛ро╕рпНродро╛роХрпНроХро│рпН","роЕроЪро╛ропрпН рокро╡рпБро▓рпНро╕рпН рооро▒рпНро▒рпБроорпН роЖро░рпЛроХрпНроХро┐ропрооро╛рой роХро┐ро░ро╛ройрпЛро▓ро╛ роЯрпНро░рпАроЯрпНро╕рпН","рооро╛рогро╡ро░рпНроХро│ро┐ройрпН рокро┐роЯро┐родрпНрод, роиро┐ро░рпНро╡роХро┐роХрпНроХроХрпНроХрпВроЯро┐роп ро╡ро░ро┐роЪрпИроХро│рпН","роЬро┐ропрпЛ роЪро┐ / рокро╛ройрпН-роГрокрпНро░рпИроЯрпН роЯроорпНрокрпНро▓ро┐роЩрпНро╕рпБроХрпНроХрпБ роЕро▒ро┐ропрокрпНрокроЯрпНроЯ","роЪрпИро╡ роЪро╛ро▓роЯрпН рокро╡рпБро▓рпНро╕рпН","ро╣ро▓ро╛ро▓рпН роЪро╛ройрпНро▒ро┐родро┤рпН ро╡ро┐ро░рпБрокрпНрокроЩрпНроХро│рпН роХро┐роЯрпИроХрпНроХро┐ройрпНро▒рой","рокрпЖро░ро┐роп роРро╕рпН рооро┐ро▓рпЛ рооро▒рпНро▒рпБроорпН рокро┐ро░рпЗроХрпНроГрокро╛ро╕рпНроЯрпН роЪрпЖроЯрпНроХро│рпБроХрпНроХрпБ роЕро▒ро┐ропрокрпНрокроЯрпНроЯ"],
                    ms: ["Terkenal dengan Ayam Penyet dan cili pedas","Nasi Ayam Telur Masin, Nasi Ayam Mala","Wafel besar, rangup dengan pelbagai topping/ais krim","Pasta krim dan tomato yang boleh disesuaikan","Mangkuk Acai dan rawatan granola sihat","Kegemaran pelajar dengan barisan boleh diurus","Dikenali untuk Jiao Zi / dumpling goreng","Mangkuk salad vegetarian","Pilihan halal tersedia","Dikenali untuk Ice Milo besar dan set sarapan"]
                },
                times: {
                    "8am-10am": [60, 30, 60, 0, 0, 0, 20, 0, 50, 70],
                    "10am-12pm": [95, 90, 80, 85, 80, 70, 60, 50, 80, 95],
                    "12pm-3pm": [100, 100, 90, 85, 80, 75, 70, 60, 95, 100],
                    "3pm-5pm": [50, 40, 60, 30, 50, 40, 20, 30, 40, 50],
                    "5pm-7pm": [30, 25, 40, 20, 25, 30, 10, 20, 30, 35]
                }
            },
            "Food Court 4": {
                stalls: ["Mala Xiang Guo","Taiwanese Cuisine","Western Food","Japanese & Korean Cuisine","Ban Mian & Fish Soup","Yong Tau Foo","Nasi Padang / Malay Cuisine","Pao Fan / Seafood Rice","Waffle & Snack Store","Drinks & Breakfast Stall"],
                descriptions: {
                    en: ["Highly popular, often considered one of the best in SP","Famous for Chicken Cutlet and Braised Pork Rice","Generous portions of Chicken Chop and Pasta","Known for Rice Bowls and Bulgogi Beef","A student favorite for a $3.50 budget meal","Large variety of fresh ingredients","Wide selection of spicy side dishes","Specialized broth-based rice dishes","Famous for large waffles and ice cream","Stays open the longest, often until 9:00 PM"],
                    zh: ["щЭЮх╕╕хПЧцмвш┐О, щАЪх╕╕швлшодф╕║цШпSPцЬАхе╜чЪДф╣Лф╕А","ф╗ещ╕бцОТхТМхНдшВЙщенщЧ╗хРН","щ╕бцЙТхТМцДПхдзхИйщЭвчЪДцЕ╖цЕиф╗╜щЗП","ф╗ещенчвЧхТМчГдчЙЫшВЙщЧ╗хРН","хнжчФЯцЬАчИ▒я╝М3.50ч╛ОхЕГщвДчоЧщдР","цЦ░щ▓ЬщЕНцЦЩчЪДхдЪчзНщАЙцЛй","ш╛гхС│щЕНшПЬчЪДх╣┐ц│ЫщАЙцЛй","ф╕Уф╕Ъц▒дх║ХщеншПЬ","ф╗ехдзхНОхдлще╝хТМхЖ░ц╖Зц╖ЛщЧ╗хРН","шРеф╕ЪцЧ╢щЧ┤цЬАщХ┐я╝МщАЪх╕╕хИ░цЩЪф╕К9:00"],
                    ta: ["SP роЗро▓рпН роЪро┐ро▒роирпНродро╡ро▒рпНро▒ро┐ро▓рпН роТройрпНро▒ро╛роХ роЕроЯро┐роХрпНроХроЯро┐ роХро░рпБродрокрпНрокроЯрпБроорпН рооро┐роХро╡рпБроорпН рокро┐ро░рокро▓рооро╛рой","роХрпЛро┤ро┐ роХроЯрпНро▓рпЖроЯрпН рооро▒рпНро▒рпБроорпН рокро┐ро░рпЗро╕рпНроЯрпН рокрпЛро░рпНроХрпН ро░рпИро╕рпБроХрпНроХрпБ рокро┐ро░рокро▓рооро╛рой","роХрпЛро┤ро┐ роЪро╛рокрпН рооро▒рпНро▒рпБроорпН рокро╛ро╕рпНродро╛ро╡ро┐ройрпН родро╛ро░ро╛ро│рооро╛рой рокроЩрпНроХрпБроХро│рпН","ро░рпИро╕рпН рокро╡рпБро▓рпНро╕рпН рооро▒рпНро▒рпБроорпН рокрпБро▓рпНроХрпЛроХро┐ рокрпАроГрокрпБроХрпНроХрпБ роЕро▒ро┐ропрокрпНрокроЯрпНроЯ","$3.50 рокроЯрпНроЬрпЖроЯрпН роЙрогро╡рпБроХрпНроХрпБ рооро╛рогро╡ро░рпН рокро┐роЯро┐родрпНрод","рокрпБродро┐роп рокрпКро░рпБроЯрпНроХро│ро┐ройрпН рокрпЖро░ро┐роп ро╡роХрпИ","роороЪро╛ро▓ро╛ рокроХрпНроХ роЙрогро╡рпБроХро│ро┐ройрпН рокро░роирпНрод родрпЗро░рпНро╡рпБ","роЪро┐ро▒рокрпНрокрпБ рокрпБро░рпЛродрпН роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓ро╛рой ро░рпИро╕рпН роЙрогро╡рпБроХро│рпН","рокрпЖро░ро┐роп ро╡ро╛роГрокро┐ро│рпНро╕рпН рооро▒рпНро▒рпБроорпН роРро╕рпН роХрпНро░рпАроорпБроХрпНроХрпБ рокро┐ро░рокро▓рооро╛рой","рокрпЖро░рпБроорпНрокро╛ро▓рпБроорпН рооро╛ро▓рпИ 9:00 ро╡ро░рпИ родро┐ро▒роирпНродро┐ро░рпБроХрпНроХрпБроорпН"],
                    ms: ["Sangat popular, sering dianggap salah satu yang terbaik di SP","Terkenal dengan Chicken Cutlet dan Braised Pork Rice","Bahagian besar Chicken Chop dan Pasta","Dikenali untuk Rice Bowls dan Bulgogi Beef","Kegemaran pelajar untuk hidangan bajet $3.50","Pelbagai bahan segar yang besar","Pilihan luas hidangan sampingan pedas","Hidangan nasi berasaskan kuah khusus","Terkenal dengan wafel besar dan ais krim","Buka paling lama, sering hingga 9:00 PM"]
                },
                times: {
                    "8am-10am": [50, 40, 30, 20, 50, 40, 30, 20, 50, 60],
                    "10am-12pm": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100],
                    "12pm-3pm": [100, 95, 90, 85, 80, 75, 80, 70, 90, 100],
                    "3pm-5pm": [60, 50, 40, 40, 50, 50, 50, 40, 50, 60],
                    "5pm-7pm": [40, 35, 30, 30, 35, 35, 30, 25, 35, 50]
                }
            },
            "Food Court 5": {
                stalls: ["Starbucks","Subway","KFC","Brunch Cafe","Bang Deli","Japanese Stall","Fruit Stall","Drinks Stall"],
                descriptions: {
                    en: ["The main study hub with a 1-for-1 tradition","Healthy sandwich option","Fried chicken staple","Famous for Japanese Donburi like Pork and Beef bowls","Known for pastries, cakes, and quick lunch boxes","Rotating tenants serving Ramen or Katsu","Fresh juices and sliced fruits","Primary source for local Kopi and Teh"],
                    zh: ["ф╕╗шжБхнжф╣аф╕нх┐Г, цЬЙ1хп╣1ф╝ач╗Я","хБех║╖ф╕ЙцШОц▓╗щАЙщб╣","чВ╕щ╕бф╕╗щгЯ","ф╗ецЧех╝Пф╕╝щенщЧ╗хРНя╝МхжВчМкшВЙхТМчЙЫшВЙчвЧ","ф╗еч│ХчВ╣уАБшЫЛч│ХхТМх┐лщАЯхНИщдРчЫТщЧ╗хРН","ш╜оцНвчзЯцИ╖цПРф╛ЫцЛЙщЭвцИЦчВ╕чМкцОТ","цЦ░щ▓ЬцЮЬц▒БхТМхИЗчЙЗц░┤цЮЬ","цЬмхЬ░хТЦхХбхТМшМ╢чЪДф╕╗шжБцЭец║Р"],
                    ta: ["1-роХрпНроХрпБ-1 рооро░рокрпБроЯройрпН роорпБродройрпНроорпИ рокроЯро┐рокрпНрокрпБ роорпИропроорпН","роЖро░рпЛроХрпНроХро┐ропрооро╛рой роЪро╛рогрпНроЯрпНро╡ро┐роЪрпН ро╡ро┐ро░рпБрокрпНрокроорпН","рокро┐ро░рпИроЯрпН роХрпЛро┤ро┐ ро╕рпНроЯрпЗрокро┐ро│рпН","рокро╛ро░рпНроХрпН рооро▒рпНро▒рпБроорпН рокрпАроГрокрпН рокро╡рпБро▓рпНро╕рпН рокрпЛройрпНро▒ роЬрокрпНрокро╛ройро┐роп роЯро╛ройрпНрокрпБро░ро┐роХрпНроХрпБ рокро┐ро░рокро▓рооро╛рой","рокрпЗро╕рпНроЯрпНро░ро┐роХро│рпН, роХрпЗроХрпНроХрпБроХро│рпН рооро▒рпНро▒рпБроорпН ро╡ро┐ро░рпИро╡ро╛рой роородро┐роп роЙрогро╡рпБ рокро╛роХрпНро╕рпНроХро│рпБроХрпНроХрпБ роЕро▒ро┐ропрокрпНрокроЯрпНроЯ","ро░рпЗрооройрпН роЕро▓рпНро▓родрпБ роХроЯрпНроЪрпБ ро╡ро┤роЩрпНроХрпБроорпН роЪрпБро┤ро▓рпБроорпН роХрпБродрпНродроХрпИродро╛ро░ро░рпНроХро│рпН","рокрпБродро┐роп роЬрпВро╕рпН рооро▒рпНро▒рпБроорпН родрпБрогрпНроЯрпБ рокро┤роЩрпНроХро│рпН","роЙро│рпНро│рпВро░ро┐ро▓рпН роХрпЛрокро┐ рооро▒рпНро▒рпБроорпН родрпЗропрпН рокро┐ро░родро╛рой роорпВро▓роорпН"],
                    ms: ["Hab utama belajar dengan tradisi 1-untuk-1","Pilihan sandwich sihat","Stap ayam goreng","Terkenal untuk Donburi Jepun seperti mangkuk Babi dan Daging","Dikenali untuk pastri, kek, dan kotak makan tengah hari pantas","Penyewa berputar yang menyajikan Ramen atau Katsu","Jus segar dan buah-buahan iris","Sumber utama untuk Kopi dan Teh tempatan"]
                },
                times: {
                    "8am-10am": [60, 40, 0, 0, 50, 0, 50, 60],
                    "10am-12pm": [95, 95, 95, 90, 85, 80, 90, 100],
                    "12pm-3pm": [100, 100, 100, 100, 90, 80, 100, 100],
                    "3pm-5pm": [70, 60, 60, 50, 60, 50, 50, 70],
                    "5pm-7pm": [50, 50, 50, 40, 40, 35, 30, 60]
                }
            },
            "Food Court 6": {
                stalls: ["Creamy Duck","Western Food","Japanese Cuisine","Chicken Rice","Vegetarian Stall","Mixed Vegetable Rice","Yong Tau Foo / Fish Soup","Drinks & Toast Stall"],
                descriptions: {
                    en: ["Legendary waffles and ice cream, must try!","Famous for large chicken chops and cheap prices","Affordable Teriyaki Chicken and Curry Rice","Reliable daily staple","Healthy and budget-friendly options","Popular for nearby office staff","Variety of fresh ingredients for soups","Early-morning drinks and toast, stays open the longest"],
                    zh: ["ф╝ахеЗхНОхдлще╝хТМхЖ░ц╖Зц╖Ля╝Мх┐Ещб╗шпХшпХя╝Б","ф╗ехдзщ╕бцЙТхТМф╛┐хоЬф╗╖ца╝щЧ╗хРН","хоЮцГачЪДчЕзчГзщ╕бхТМхТЦхЦ▒щен","хПпщЭачЪДцЧех╕╕ф╕╗щгЯ","хБех║╖ф╕ФщвДчоЧхПЛхе╜чЪДщАЙщб╣","щЩДш┐СхКЮхЕмходхСШх╖ехПЧцмвш┐О","ц▒дхУБцЦ░щ▓ЬщЕНцЦЩчЪДхдЪчзНщАЙцЛй","цЧйщЧ┤щеоцЦЩхТМхРРхП╕я╝МшРеф╕ЪцЧ╢щЧ┤цЬАщХ┐"],
                    ta: ["рокрпБро░ро╛рог ро╡ро╛роГрокро┐ро│рпНро╕рпН рооро▒рпНро▒рпБроорпН роРро╕рпН роХрпНро░рпАроорпН, роХроЯрпНроЯро╛ропроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН!","рокрпЖро░ро┐роп роХрпЛро┤ро┐ роЪро╛рокрпН рооро▒рпНро▒рпБроорпН рооро▓ро┐ро╡рпБ ро╡ро┐ро▓рпИроХро│рпБроХрпНроХрпБ рокро┐ро░рокро▓рооро╛рой","рооро▓ро┐ро╡ро╛рой роЯрпЖро░ро┐ропро╛роХро┐ роХрпЛро┤ро┐ рооро▒рпНро▒рпБроорпН роХро▒ро┐ роЪро╛родроорпН","роироорпНрокроХрооро╛рой родро┐ройроЪро░ро┐ ро╕рпНроЯрпЗрокро┐ро│рпН","роЖро░рпЛроХрпНроХро┐ропрооро╛рой рооро▒рпНро▒рпБроорпН рокроЯрпНроЬрпЖроЯрпН-роироЯрпНрокрпБ ро╡ро┐ро░рпБрокрпНрокроЩрпНроХро│рпН","роЕро░рпБроХро┐ро▓рпБро│рпНро│ роЕро▓рпБро╡ро▓роХ роКро┤ро┐ропро░рпНроХро│рпБроХрпНроХрпБ рокро┐ро░рокро▓рооро╛рой","роЪрпВрокрпН роХро│рпБроХрпНроХрпБ рокрпБродро┐роп рокрпКро░рпБроЯрпНроХро│ро┐ройрпН ро╡роХрпИ","роХро╛ро▓рпИ роХро╛ро▓рпИ рокро╛ройроЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЯрпЛро╕рпНроЯрпН, рооро┐роХ роирпАрогрпНроЯ родро┐ро▒роирпНродро┐ро░рпБроХрпНроХрпБроорпН"],
                    ms: ["Wafel legenda dan ais krim, mesti cuba!","Terkenal dengan ayam goreng besar dan harga murah","Ayam Teriyaki dan Nasi Kari yang mampu milik","Stap harian yang boleh dipercayai","Pilihan sihat dan bajet mesra","Popular untuk kakitangan pejabat berdekatan","Pelbagai bahan segar untuk sup","Minuman pagi dan roti bakar, buka paling lama"]
                },
                times: {
                    "8am-10am": [40, 30, 30, 20, 20, 20, 20, 40],
                    "10am-12pm": [95, 95, 95, 90, 90, 90, 90, 95],
                    "12pm-3pm": [100, 100, 100, 100, 95, 95, 90, 100],
                    "3pm-5pm": [40, 40, 40, 30, 30, 30, 30, 40],
                    "5pm-7pm": [10, 10, 10, 10, 10, 10, 10, 20]
                }
            }
        };

        // Translation object for stalls and FC names
        const fcTranslations = {
            en: {},
            ms: {
                "Food Court 1": "Dewan Makan 1",
                "Food Court 2": "Dewan Makan 2",
                "Food Court 3": "Dewan Makan 3",
                "Food Court 4": "Dewan Makan 4",
                "Food Court 5": "Dewan Makan 5",
                "Food Court 6": "Dewan Makan 6",
                "Chicken Rice": "Nasi Ayam",
                "Japanese Curry / Rice Bowls": "Kari Jepun / Mangkuk Nasi",
                "Western Cuisine": "Makanan Barat",
                "Ban Mian / Fish Soup": "Ban Mian / Sup Ikan",
                "Mala Hotpot": "Hotpot Mala",
                "Thai Cuisine": "Masakan Thai",
                "Yong Tau Foo": "Yong Tau Foo",
                "Desserts": "Pencuci Mulut",
                "Drinks & Toast Stall": "Gerai Minuman & Roti Bakar",
                "Creamy Duck": "Creamy Duck",
                "Japanese Cuisine": "Masakan Jepun",
                "Chicken Rice": "Nasi Ayam",
                "Vegetarian Stall": "Gerai Vegetarian",
                "Mixed Vegetable Rice": "Nasi Sayur Campur",
                "Yong Tau Foo / Fish Soup": "Yong Tau Foo / Sup Ikan"
            },
            zh: {
                "Food Court 1": "щгЯщШБ1",
                "Food Court 2": "щгЯщШБ2",
                "Food Court 3": "щгЯщШБ3",
                "Food Court 4": "щгЯщШБ4",
                "Food Court 5": "щгЯщШБ5",
                "Food Court 6": "щгЯщШБ6",
                "Chicken Rice": "щ╕бщен",
                "Japanese Curry / Rice Bowls": "цЧех╝ПхТЦхЦ▒/щен",
                "Western Cuisine": "ше┐щдР",
                "Ban Mian / Fish Soup": "цЭ┐щЭв/щ▒╝ц▒д",
                "Mala Hotpot": "щ║╗ш╛гчБлщФЕ",
                "Thai Cuisine": "ц│░х╝ПцЦЩчРЖ",
                "Yong Tau Foo": "щЕ┐ш▒ЖшЕР",
                "Desserts": "чФЬхУБ",
                "Drinks & Toast Stall": "щеоцЦЩф╕ОхРРхП╕цСК",
                "Creamy Duck": "Creamy Duck",
                "Japanese Cuisine": "цЧех╝ПцЦЩчРЖ",
                "Chicken Rice": "щ╕бщен",
                "Vegetarian Stall": "ч┤ащгЯцСК",
                "Mixed Vegetable Rice": "ф╗АшПЬщен",
                "Yong Tau Foo / Fish Soup": "щЕ┐ш▒ЖшЕР/щ▒╝ц▒д"
            },
            ta: {
                "Food Court 1": "роЙрогро╡роХ 1",
                "Food Court 2": "роЙрогро╡роХ 2",
                "Food Court 3": "роЙрогро╡роХ 3",
                "Food Court 4": "роЙрогро╡роХ 4",
                "Food Court 5": "роЙрогро╡роХ 5",
                "Food Court 6": "роЙрогро╡роХ 6",
                "Chicken Rice": "роХрпЛро┤ро┐ роЪро╛родроорпН",
                "Japanese Curry / Rice Bowls": "роЬрокрпНрокро╛ройро┐роп роХро▒ро┐ / роЪро╛родроорпН",
                "Western Cuisine": "роорпЗро▒рпНроХродрпНродро┐роп роЙрогро╡рпБ",
                "Ban Mian / Fish Soup": "рокро╛ройрпН рооро┐ропройрпН / роорпАройрпН роЪрпВрокрпН",
                "Mala Hotpot": "рооро╛ро▓ро╛ ро╣ро╛роЯрпНрокро╛роЯрпН",
                "Thai Cuisine": "родрпИ роЙрогро╡рпБ",
                "Yong Tau Foo": "ропро╛роЩрпН роЯрпМ роГрокрпВ",
                "Desserts": "роЗройро┐рокрпНрокрпБроХро│рпН",
                "Drinks & Toast Stall": "рокро╛ройроЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЯрпЛро╕рпНроЯрпН ро╕рпНроЯро╛ро▓рпН",
                "Creamy Duck": "роХрпНро░рпАрооро┐ роЯроХрпН",
                "Japanese Cuisine": "роЬрокрпНрокро╛ройро┐роп роЙрогро╡рпБ",
                "Chicken Rice": "роХрпЛро┤ро┐ роЪро╛родроорпН",
                "Vegetarian Stall": "роЪрпИро╡ роЙрогро╡рпБ ро╕рпНроЯро╛ро▓рпН",
                "Mixed Vegetable Rice": "роХро╛ропрпНроХро▒ро┐ роХро▓роирпНрод роЪро╛родроорпН",
                "Yong Tau Foo / Fish Soup": "ропро╛роЩрпН роЯрпМ роГрокрпВ / роорпАройрпН роЪрпВрокрпН"
            }
        };

        let activeCard = null;
        let currentLang = "en";

        // Function to update stall list names and descriptions
        async function updateStallList(fcName, timePeriod) {
            const fcStalls = fcData[fcName].stalls;
            const fcDesc = fcData[fcName].descriptions;
            const defaultPercent = fcData[fcName].times[timePeriod];

            // 1я╕ПтГг Clone default percentages
            let finalPercent = [...defaultPercent];

            // 2я╕ПтГг Fetch live availability
            try {
                const res = await fetch(
                    `${API_BASE}/availability?foodCourt=${encodeURIComponent(fcName)}&timePeriod=${encodeURIComponent(timePeriod)}`
                );
                const liveData = await res.json();

                // 3я╕ПтГг Override matching stalls
                liveData.forEach(live => {
                    const index = fcStalls.findIndex(
                        s => s.toLowerCase().includes(live.stall.toLowerCase())
                    );
                    if (index !== -1) {
                        finalPercent[index] = live.percentage;
                    }
                });
            } catch (e) {
                console.warn("Using default data");
            }
            
            // 4я╕ПтГг Render UI
            stallList.innerHTML = "";
            fcStalls.forEach((stall, i) => {
                const translatedStall = fcTranslations[currentLang][stall] || stall;
                const desc = fcDesc[currentLang][i] || "";
                const percent = finalPercent[i] || 0;

                stallList.innerHTML += `
                    <li>
                        <span>${translatedStall}</span>
                        <span class="percent-text">${percent}%</span>
                        ${desc ? `<small>${desc}</small>` : ""}
                        <div class="bar" style="width: ${percent}%"></div>
                    </li>
                `;
            });
        }

        // Click on foodcourt cards
        foodcourtCards.forEach(card => {
            card.addEventListener("click", () => {
                const fcName = card.dataset.fc;
                const isRight = parseInt(fcName.match(/\d+/)[0]) % 2 === 1;

                if (activeCard === card) {
                    fcInfoPanel.classList.remove("show-left", "show-right");
                    fcInfoPanel.classList.add(isRight ? "off-right" : "off-left");
                    activeCard = null;
                    return;
                }

                fcInfoPanel.classList.remove("show-left", "show-right", "off-left", "off-right");
                fcInfoPanel.classList.add(isRight ? "show-right" : "show-left");

                const translatedFc = fcTranslations[currentLang][fcName] || fcName;
                fcTitle.innerText = translatedFc;

                // Default time period
                const defaultTime = "10am-12pm";
                updateStallList(fcName, defaultTime);

                // Time buttons
                timeButtons.forEach(btn => {
                    btn.classList.remove("active");
                    if (btn.dataset.time === defaultTime) btn.classList.add("active");
                    btn.onclick = () => {
                        timeButtons.forEach(b => b.classList.remove("active"));
                        btn.classList.add("active");
                        updateStallList(fcName, btn.dataset.time);
                    };
                });

                activeCard = card;
            });
        });

        // Language switcher
        const languageDropdown = document.getElementById("languageDropdown");
        if (languageDropdown) {
            languageDropdown.addEventListener("change", function () {
                currentLang = this.value;

                // Update foodcourt card labels
                foodcourtCards.forEach(card => {
                    const fcName = card.dataset.fc;
                    const translatedFc = fcTranslations[currentLang][fcName] || fcName;
                    card.querySelector(".foodcourt-overlay").innerText = translatedFc;
                });

                // Update info panel if active
                if (activeCard) {
                    const fcName = activeCard.dataset.fc;
                    const translatedFc = fcTranslations[currentLang][fcName] || fcName;
                    fcTitle.innerText = translatedFc;
                    // Update stall list
                    const activeTime = document.querySelector(".time-buttons button.active").dataset.time;
                    updateStallList(fcName, activeTime);
                }

                // Update page title and sections
                document.getElementById("pickFoodcourt").innerText = translations[currentLang].pickFoodcourt;
                document.getElementById("salesAvailable").innerText = translations[currentLang].salesAvailable;
                document.getElementById("timePeriod").innerText = translations[currentLang].timePeriod;
                document.getElementById("time1").innerText = translations[currentLang].time1;
                document.getElementById("time2").innerText = translations[currentLang].time2;
                document.getElementById("time3").innerText = translations[currentLang].time3;
                document.getElementById("time4").innerText = translations[currentLang].time4;
                document.getElementById("time5").innerText = translations[currentLang].time5;
            });
        }
    }

    let currentLang = "en"; // default

    const languageDropdown = document.getElementById("languageDropdown");
    if (languageDropdown) {
        languageDropdown.addEventListener("change", function () {
            currentLang = this.value;
            const t = translations[this.value];

            // Index page updates
            if (document.getElementById("menuTitle")) {
                document.getElementById("menuTitle").innerText = t.menuTitle;
                document.querySelector("#chinese span").innerText = t.chinese;
                document.querySelector("#malay span").innerText = t.malay;
                document.querySelector("#western span").innerText = t.western;
                document.querySelector("#korean span").innerText = t.korean;
                document.querySelector("#japanese span").innerText = t.japanese;
                document.querySelector("#desserts span").innerText = t.desserts;
                document.querySelector("#drinks span").innerText = t.drinks;
                document.querySelector("#fruits span").innerText = t.fruits;
                document.getElementById("scheduleBtn").innerText = t.scheduleBtn;
                document.getElementById("trackerBtn").innerText = t.trackerBtn;
                document.getElementById("langLabel").innerText = t.langLabel;
            }

            // Schedule page updates
            if (document.getElementById("legendTitle")) {
                document.getElementById("legendTitle").innerText = t.crowdLevelLegend;
                document.getElementById("lowLabel").innerText = t.low;
                document.getElementById("mediumLabel").innerText = t.medium;
                document.getElementById("highLabel").innerText = t.high;
                document.getElementById("weekendLabel").innerText = t.weekend;
                document.getElementById("infoText").innerText = infoTranslations[currentLang].selectDate;

                // Regenerate calendar to update day headers
                if (typeof generateCalendar === "function") {
                    generateCalendar();
                }
            }
        });
    }

    /* =========================
       SCHEDULE PAGE LOGIC
    ========================== */

    const calendarGrid = document.getElementById("calendarGrid");
    const infoPanel = document.getElementById("infoPanel");
    const monthTitle = document.getElementById("monthTitle");

    if (!calendarGrid) return; // prevents JS crash on index page

    function getLocalDateKey(date) {
        const y = date.getFullYear();
        const m = String(date.getMonth() + 1).padStart(2, "0");
        const d = String(date.getDate()).padStart(2, "0");
        return `${y}-${m}-${d}`;
    }

    let currentMonth = 0; // January
    let currentYear = 2026;

    const events = {
        // ===== JANUARY =====
        "2026-01-05": {
            level: "high",
            title: "First Day of Semester",
            text: "All students return to campus.\nHigh crowd expected across all food courts."
        },
        
        "2026-01-08": {
            level: "high",
            title: "SP Open House & I&I Showcase",
            text: "Major campus event with public visitors, tours and exhibitions.\nVery high crowd."
        },
        
        "2026-01-09": {
            level: "high",
            title: "SP Open House & I&I Showcase",
            text: "Second day of Open House.\nHeavy footfall across campus."
        },
        
        "2026-01-10": {
            level: "high",
            title: "SP Open House & I&I Showcase",
            text: "Final day of Open House.\nPublic visitors + student ambassadors."
        },
        
        "2026-01-14": {
            level: "high",
            title: "GCE O-Level Results Release",
            text: "Prospective students and parents visit campus for JAE counselling.\nCrowded Convention Centre."
        },
        
        "2026-01-26": {
            level: "high",
            title: "Exam Timetable Release",
            text: "Start of intensive revision period.\nLibraries and study areas very crowded."
        },
        // ===== FEBRUARY =====
        "2026-02-07": {
            level: "high",
            title: "ABEC Grow & Green Initiative",
            text: "Community and sustainability event by Architecture & Built Environment Club.\nStudent volunteers active around ABE blocks and Jurong East area."
        },
        "2026-02-09": {
            level: "high",
            title: "Release of Final Exam Seats",
            text: "Students receive official exam seat numbers.\nHigh stress levels and heavy library usage expected."
        },
        "2026-02-13": {
            level: "high",
            title: "Decision Deadline",
            text: "Final deadline for course/module deferments or withdrawals.\nStudent Service Centre and school offices are crowded."
        },
        "2026-02-16": {
            level: "low",
            title: "Chinese New Year Eve",
            text: "Most students leave campus early for reunion dinners.\nCampus likely to be quiet by noon."
        },
        "2026-02-17": {
            level: "low",
            title: "Chinese New Year",
            text: "Public Holiday.\nEntire campus, including food courts and libraries, is closed."
        },
        "2026-02-18": {
            level: "low",
            title: "Chinese New Year",
            text: "Public Holiday.\nEntire campus, including food courts and libraries, is closed."
        },
        "2026-02-26": {
            level: "high",
            title: "Semester 2 Examinations Begin",
            text: "Exams officially begin.\nLarge waves of students gather near exam halls before paper start times."
        },
        // ===== MARCH =====
        "2026-03-01": {
            level: "high",
            title: "Final Exams - Mugging Period",
            text: "Peak revision period.\nLibraries and study areas reach maximum capacity from early morning."
        },
        "2026-03-02": {
            level: "high",
            title: "Final Exams - Mugging Period",
            text: "Heavy student presence in libraries and study zones.\nFood courts quieter outside exam windows."
        },
        "2026-03-03": {
            level: "high",
            title: "Final Exams - Mugging Period",
            text: "Students concentrate around study areas and exam venues."
        },
        "2026-03-04": {
            level: "high",
            title: "Final Exams - Mugging Period",
            text: "Last stretch of intensive revision before final papers."
        },
        "2026-03-05": {
            level: "high",
            title: "Final Exams End",
            text: "Final examination day.\nLarge student waves near exam halls before paper timings."
        },
        "2026-03-10": {
            level: "high",
            title: "BusinessPlan 2026",
            text: "Signature competition hosted by SP School of Business.\nHigh influx of secondary school students and faculty around Block W and Convention Centre."
        },
        "2026-03-16": {
            level: "low",
            title: "Internship Programme Begins",
            text: "Many Year 2 and Year 3 students begin internships.\nCampus becomes noticeably quieter."
        },
        "2026-03-21": {
            level: "low",
            title: "Hari Raya Puasa",
            text: "Public Holiday.\nCampus closed with zero student activity."
        },
        "2026-03-23": {
            level: "medium",
            title: "Result Release Day",
            text: "Results released online.\nSmall wave of students return for celebrations, appeals and admin matters."
        },
        // ===== APRIL =====
        // Good Friday тАУ Campus Closed
        "2026-04-03": {
            level: "low",
            title: "Good Friday (Public Holiday)",
            text: "Public holiday.\nCampus is closed with zero student activity."
        },
        
        // Release of Class Timetable
        "2026-04-06": {
            level: "low",
            title: "Release of Class Timetable",
            text: "Students check timetables online.\nMinimal physical crowd on campus."
        },
        
        // Freshmen Orientation Programme (FOP)
        "2026-04-13": {
            level: "high",
            title: "Freshmen Orientation Programme (FOP)",
            text: "Orientation activities for Year 1 students.\nHigh crowd levels around SP Plaza and food courts."
        },
        
        "2026-04-14": {
            level: "high",
            title: "Freshmen Orientation Programme (FOP)",
            text: "Campus filled with freshies and student facilitators.\nMass games, cheers, and campus tours ongoing."
        },
        "2026-04-15": {
            level: "high",
            title: "Freshmen Orientation Programme (FOP)",
            text: "Orientation continues.\nLunch hours are especially crowded at food courts."
        },
        "2026-04-16": {
            level: "high",
            title: "Freshmen Orientation Programme (FOP)",
            text: "High-energy orientation activities across campus.\nExpect noise and heavy foot traffic."
        },
        "2026-04-17": {
            level: "high",
            title: "Freshmen Orientation Programme (FOP)",
            text: "Final day of orientation.\nCelebratory atmosphere and peak crowd levels."
        },
        
        // First Day of Term 1
        "2026-04-20": {
            level: "high",
            title: "First Day of Term 1",
            text: "All students return to campus.\nExtremely crowded MRT, food courts, and walkways."
        },

        // ===== MAY =====
        // Labour Day тАУ Campus Closed
        "2026-05-01": {
            level: "low",
            title: "Labour Day (Public Holiday)",
            text: "Public holiday.\nCampus is closed with zero student activity."
        },
        
        // Graduation Ceremonies (Early May)
        "2026-05-04": {
            level: "high",
            title: "Graduation Ceremonies",
            text: "Thousands of graduates return.\nFC1 and SP Plaza extremely crowded, lots of photos at Red Bridge."
        },
        
        "2026-05-05": {
            level: "high",
            title: "Graduation Ceremonies",
            text: "Thousands of graduates return.\nFC1 and SP Plaza extremely crowded, lots of photos at Red Bridge."
        },
        "2026-05-06": {
            level: "high",
            title: "Graduation Ceremonies",
            text: "Thousands of graduates return.\nFC1 and SP Plaza extremely crowded, lots of photos at Red Bridge."
        },
        
        "2026-05-07": {
            level: "high",
            title: "Graduation Ceremonies",
            text: "Thousands of graduates return.\nFC1 and SP Plaza extremely crowded, lots of photos at Red Bridge."
        },
        
        "2026-05-08": {
            level: "high",
            title: "Graduation Ceremonies",
            text: "Thousands of graduates return.\nFC1 and SP Plaza extremely crowded, lots of photos at Red Bridge."
        },
        
        // Project & Assignment Crunch (Mid-May)
        "2026-05-11": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        
        "2026-05-12": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        
        "2026-05-13": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        
        "2026-05-14": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        "2026-05-15": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        
        "2026-05-16": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        
        "2026-05-17": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        
        "2026-05-18": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        
        "2026-05-19": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        
        "2026-05-20": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        
        "2026-05-21": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        
        "2026-05-22": {
            level: "high",
            title: "Project & Assignment Crunch",
            text: "Students in labs and libraries working intensively.\nFood courts remain busy."
        },
        
        // SP Excellence Awards тАУ May 26
        "2026-05-26": {
            level: "medium",
            title: "SP Excellence Awards",
            text: "Recognition ceremony for top students and CCA leaders.\nSome facilities booked, moderate crowd expected."
        },
        
        // Hari Raya Haji тАУ May 27
        "2026-05-27": {
            level: "low",
            title: "Hari Raya Haji (Public Holiday)",
            text: "Campus is closed for public holiday.\nZero student activity."
        },

        // Pre-Test Revision Days тАУ May 28тАУ29
        "2026-05-28":{
            level: "high",
            title: "Pre-Test Revision Days",
            text: "Intense library usage.\nStudents prepare for upcoming tests."
        
        },
        
        "2026-05-29": {
            level: "high",
            title: "Pre-Test Revision Days",
            text: "Intense library usage.\nStudents prepare for upcoming tests."
        },
        
        // Vesak Day тАУ May 31 (PH on June 1)
        "2026-05-31": {
            level: "low",
            title: "Vesak Day (Public Holiday)",
            text: "Campus closed.\nZero student activity."
        },

        // ===== JUNE =====
        // Vesak Day (In Lieu) тАУ June 1
        "2026-06-01": {
            level: "low",
            title: "Vesak Day (Public Holiday)",
            text: "Campus is closed for public holiday.\nZero student activity."
        },

        // Mid-Semester Tests тАУ June 2тАУ5
        "2026-06-02": {
            level: "high",
            title: "Mid-Semester Tests",
            text: "Large groups arrive for their test slots.\nFood Courts (FC1, FC5) and libraries very crowded 11AMтАУ2PM."
        },
        
        "2026-06-03": {
            level: "high",
            title: "Mid-Semester Tests",
            text: "Large groups arrive for their test slots.\nFood Courts (FC1, FC5) and libraries very crowded 11AMтАУ2PM."
        },
        
        "2026-06-04": {
            level: "high",
            title: "Mid-Semester Tests",
            text: "Large groups arrive for their test slots.\nFood Courts (FC1, FC5) and libraries very crowded 11AMтАУ2PM."
        },
        
        "2026-06-05": {
            level: "high",
            title: "Mid-Semester Tests",
            text: "Large groups arrive for their test slots.\nFood Courts (FC1, FC5) and libraries very crowded 11AMтАУ2PM."
        },

        // "Go Eco" Week тАУ June 15тАУ19
        "2026-06-15": {
            level: "low",
            title: "Go Eco Week",
            text: "Campus-wide sustainability initiatives or staff workshops.\nGeneral student attendance is near zero."
        },

        "2026-06-16": { level: "low", title: "Go Eco Week", text: "Campus-wide sustainability initiatives.\nGeneral student attendance is near zero." },
        "2026-06-17": { level: "low", title: "Go Eco Week", text: "Campus-wide sustainability initiatives.\nGeneral student attendance is near zero." },
        "2026-06-18": { level: "low", title: "Go Eco Week", text: "Campus-wide sustainability initiatives.\nGeneral student attendance is near zero." },
        "2026-06-19": { level: "low", title: "Go Eco Week", text: "Campus-wide sustainability initiatives.\nGeneral student attendance is near zero." },
        
        // Term 2 Classes Begin тАУ June 29
        "2026-06-29": {
            level: "medium",
            title: "Term 2 Classes Begin",
            text: "All students return to campus.\nFood courts and walkways busy, semester starts."
        }
    };

    function isBetween(date, start, end) {
        return date >= new Date(start) && date <= new Date(end);
    }
    
    function getCrowdLevel(date) {
        const key = getLocalDateKey(date);
        
        // Specific event override
        if (events[key]) return events[key].level;

        // Vacation periods тЖТ GREEN
        if (
            isBetween(date, "2025-12-13", "2026-01-04") ||
            isBetween(date, "2026-03-07", "2026-04-19")
        ) return "low";

        // Examination period тЖТ GREEN
        if (isBetween(date, "2026-02-23", "2026-03-06")) return "low";

        // Home-based learning тЖТ GREEN
        if (key === "2026-01-08" || key === "2026-01-09") return "high";

        // Chinese New Year (Green / Low)
        if (isBetweenLocal(date, "2026-02-16", "2026-02-18")) return "low";

        // Study Week & Mugging Period (Red)
        if (isBetweenLocal(date, "2026-02-16", "2026-02-22")) return "high";

        // A-Level Results Release window (Red)
        if (isBetweenLocal(date, "2026-02-25", "2026-02-27")) return "high";

        // Mugging & Final Exams (Mar 1тАУ5)
        if (isBetweenLocal(date, "2026-03-01", "2026-03-05")) return "high";

        // End of Vacation (Apr 1тАУ12)
        if (isBetweenLocal(date, "2026-04-01", "2026-04-12")) return "low";

        // Freshmen Orientation Programme (Apr 13тАУ17)
        if (isBetweenLocal(date, "2026-04-13", "2026-04-17")) return "high";

        // Labour Day тАУ May 1
        if (key === "2026-05-01") return "low";

        // Graduation Ceremonies тАУ May 4тАУ8
        if (isBetweenLocal(date, "2026-05-04", "2026-05-08")) return "high";

        // Project & Assignment Crunch тАУ May 11тАУ22
        if (isBetweenLocal(date, "2026-05-11", "2026-05-22")) return "high";

        // SP Excellence Awards тАУ May 26
        if (key === "2026-05-26") return "medium";

        // Hari Raya Haji тАУ May 27
        if (key === "2026-05-27") return "low";

        // Pre-Test Revision Days тАУ May 28тАУ29
        if (isBetweenLocal(date, "2026-05-28", "2026-05-29")) return "high";

        // Vesak Day тАУ May 31
        if (key === "2026-05-31") return "low";

        // Vesak Day (In Lieu) тАУ June 1
        if (key === "2026-06-01") return "low";
        
        // Mid-Semester Tests (June 2тАУ5)
        if (isBetweenLocal(date, "2026-06-02", "2026-06-05")) return "high";

        // Mid-Semester Vacation (Phase 1) June 6тАУ21 тЖТ GREEN
        if (isBetweenLocal(date, "2026-06-06", "2026-06-21")) return "low";

        // "Go Eco" Week тАУ June 15тАУ19 тЖТ GREEN
        if (isBetweenLocal(date, "2026-06-15", "2026-06-19")) return "low";

        // Mid-Semester Vacation (Phase 2) June 22тАУ28 тЖТ GREEN
        if (isBetweenLocal(date, "2026-06-22", "2026-06-28")) return "low";

        // Term 2 Classes Begin тАУ June 29
        if (key === "2026-06-29") return "medium";

        // Term 1 general period (Apr 20 onwards) тЖТ RED
        // Put at the END so it doesn't override May/June vacations
        if (date >= new Date("2026-04-20") && date <= new Date("2026-05-31")) return "high";

        // Weekend тЖТ WHITE
        const day = date.getDay();
        if (day === 0 || day === 6) return "weekend";

        // Normal school day тЖТ YELLOW
        return "medium";
    }

    function isBetweenLocal(date, start, end) {
        const key = getLocalDateKey(date);
        return key >= start && key <= end;
    }

    function generateCalendar() {
        calendarGrid.innerHTML = "";

        const days = translations[currentLang].days;
        days.forEach(d => {
            const div = document.createElement("div");
            div.className = "day-header";
            div.innerText = d;
            calendarGrid.appendChild(div);
        });

        const firstDay = new Date(currentYear, currentMonth, 1).getDay();
        const totalDays = new Date(currentYear, currentMonth + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
            calendarGrid.appendChild(document.createElement("div"));
        }

        for (let day = 1; day <= totalDays; day++) {
            const date = new Date(currentYear, currentMonth, day);
            const dateKey = getLocalDateKey(date);

            const div = document.createElement("div");
            div.className = "day";

            const level = getCrowdLevel(date);
            div.classList.add(level);

            div.innerText = day;

            div.onclick = () => {
    const key = getLocalDateKey(date);

    // Default
    let title = infoTranslations[currentLang].academicDay;
    let text = infoTranslations[currentLang].selectDate;

    // Vacation explanation (1тАУ4 Jan)
    if (isBetweenLocal(date, "2026-01-01", "2026-01-04")) {
        title = infoTranslations[currentLang].vacation;
        text = "Semester break from 1-4 January. Campus activity is minimal, hence low crowd levels are expected.";
    }

    // Study Week (except CNY)
    if (isBetweenLocal(date, "2026-02-16", "2026-02-22")) {
        title = infoTranslations[currentLang].academicDay;
        text = "No formal classes.\nFood courts are quieter, but libraries are at maximum capacity throughout the day.";
    }

    // A-Level Results Release window
    if (isBetweenLocal(date, "2026-02-25", "2026-02-27")) {
        title = infoTranslations[currentLang].academicDay;
        text = "Increase in external visitors at the Student Service Centre.\nModerate crowd surge expected.";
    }

    // Final Exams & Mugging Period
    if (isBetweenLocal(date, "2026-03-01", "2026-03-05")) {
        title = infoTranslations[currentLang].midTests;
        text = "Extreme demand for library seats.\nStudents gather near exam halls before paper timings.";
    }

    // Vacation Ghost Town
    if (isBetweenLocal(date, "2026-03-07", "2026-04-19")) {
        title = infoTranslations[currentLang].vacation;
        text = "Most students are away.\nMany food stalls operate shorter hours or close temporarily.";
    }

    // End of Vacation (Apr 1тАУ12)
    if (isBetweenLocal(date, "2026-04-01", "2026-04-12")) {
        title = infoTranslations[currentLang].vacation;
        text = "Semester break continues.\nCampus is quiet with minimal student presence.";
    }

    // Freshmen Orientation Programme
    if (isBetweenLocal(date, "2026-04-13", "2026-04-17")) {
        title = infoTranslations[currentLang].academicDay;
        text = "Orientation week for Year 1 students.\nExpect loud cheers, mass games, campus tours, and busy lunch hours.";
    }

    // Term 1 Classes Begin
    if (date >= new Date("2026-04-20")) {
        title = infoTranslations[currentLang].term2;
        text = "All students return to campus.\nFood courts experience long queues, and main walkways are heavily congested.";
    }

    // Labour Day тАУ May 1
    if (key === "2026-05-01") {
        title = infoTranslations[currentLang].vacation;
        text = "Campus is closed for public holiday.\nZero student activity.";
    }

    // Graduation Ceremonies
    if (isBetweenLocal(date, "2026-05-04", "2026-05-08")) {
        title = infoTranslations[currentLang].academicDay;
        text = "Thousands of graduates return.\nFC1 and SP Plaza extremely crowded.\nLots of photos at Red Bridge.";
    }

    // Project & Assignment Crunch
    if (isBetweenLocal(date, "2026-05-11", "2026-05-22")) {
        title = infoTranslations[currentLang].academicDay;
        text = "Students in labs and libraries working intensively.\nFood courts remain busy.";
    }

    // SP Excellence Awards
    if (key === "2026-05-26") {
        title = infoTranslations[currentLang].academicDay;
        text = "Recognition ceremony for top students and CCA leaders.\nModerate crowd expected in certain areas.";
    }

    // Hari Raya Haji
    if (key === "2026-05-27") {
        title = infoTranslations[currentLang].vacation;
        text = "Campus is closed for public holiday.\nZero student activity.";
    }

    // Pre-Test Revision Days
    if (isBetweenLocal(date, "2026-05-28", "2026-05-29")) {
        title = infoTranslations[currentLang].midTests;
        text = "Intense library usage.\nStudents prepare for upcoming tests.";
    }

    // Vesak Day тАУ May 31 & June 1
    if (key === "2026-05-31" || key === "2026-06-01") {
        title = infoTranslations[currentLang].vacation;
        text = "Campus is closed for public holiday.\nZero student activity.";
    }

    // Mid-Semester Tests
    if (isBetweenLocal(date, "2026-06-02", "2026-06-05")) {
        title = infoTranslations[currentLang].midTests;
        text = "Large groups arrive for test slots.\nFood Courts (FC1, FC5) and libraries very crowded 11AMтАУ2PM.";
    }

    // Mid-Semester Vacation
    if (isBetweenLocal(date, "2026-06-06", "2026-06-28")) {
        title = infoTranslations[currentLang].midVacation;
        text = "Most students are away.\nCampus is quiet with very low activity.";
    }

    // Term 2 Classes Begin
    if (key === "2026-06-29") {
        title = infoTranslations[currentLang].term2;
        text = "All students return to campus.\nFood courts and walkways busy, semester starts.";
    }

    // Override with custom events if exists
    if (events[key]) {
        title = events[key].title;
        text = events[key].text;
    }

    document.getElementById("infoDate").innerText = date.toDateString();
    document.getElementById("infoTitle").innerHTML = `<strong>${title}</strong>`;
    document.getElementById("infoText").innerText = text;
};

            calendarGrid.appendChild(div);
        }

        monthTitle.innerText = new Date(currentYear, currentMonth)
            .toLocaleString("default", { month: "long", year: "numeric" });
    }

    window.changeMonth = function (dir) {
        currentMonth += dir;

        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
        } else if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
        }

        generateCalendar();
    };
    generateCalendar();
});

